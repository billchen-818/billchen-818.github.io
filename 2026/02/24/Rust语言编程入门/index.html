<!DOCTYPE html><html lang="zh-cn"><head><title>Rustè¯­è¨€ç¼–ç¨‹å…¥é—¨</title><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=0.5"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="stylesheet" href="/css/highlight/xcode.min.css"><link rel="stylesheet" href="/css/bootstrap/bootstrap-tooltips.css"><link rel="stylesheet" href="/css/post.css"><script src="/js/jquery.min.js"></script><meta name="generator" content="Hexo 7.3.0"></head><body><script>if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)) {
  document.body.classList.add('mobile')
}</script><div><div class="inner"><h1>Rustè¯­è¨€ç¼–ç¨‹å…¥é—¨</h1><div class="time">2026-02-24</div><ul class="tags"><li><span>#</span><a href="/tags/Rust/">Rust</a></li></ul><h2 id="1-Rust-ç®€ä»‹"><a href="#1-Rust-ç®€ä»‹" class="headerlink" title="1. Rust ç®€ä»‹"></a>1. Rust ç®€ä»‹</h2><p>Rust æ˜¯ä¸€é—¨ç”± Mozilla ç ”å‘çš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œä¸“æ³¨äº <strong>å®‰å…¨æ€§</strong>ã€<strong>å¹¶å‘æ€§</strong> å’Œ <strong>é«˜æ€§èƒ½</strong>ã€‚å®ƒåœ¨æ²¡æœ‰åƒåœ¾å›æ”¶æœºåˆ¶çš„å‰æä¸‹ï¼Œé€šè¿‡ç‹¬ç‰¹çš„ <strong>æ‰€æœ‰æƒç³»ç»Ÿ</strong> ä¿è¯å†…å­˜å®‰å…¨ï¼Œæ˜¯æ›¿ä»£ C&#x2F;C++ çš„ç°ä»£åŒ–é€‰æ‹©ã€‚</p>
<h3 id="æ ¸å¿ƒä¼˜åŠ¿"><a href="#æ ¸å¿ƒä¼˜åŠ¿" class="headerlink" title="æ ¸å¿ƒä¼˜åŠ¿"></a>æ ¸å¿ƒä¼˜åŠ¿</h3><ul>
<li><strong>å†…å­˜å®‰å…¨</strong>ï¼šç¼–è¯‘æœŸæ¶ˆé™¤ç©ºæŒ‡é’ˆã€æ‚¬å‚æŒ‡é’ˆã€æ•°æ®ç«äº‰ç­‰é—®é¢˜</li>
<li><strong>é›¶æˆæœ¬æŠ½è±¡</strong>ï¼šé«˜å±‚æŠ½è±¡ä¸å¸¦æ¥é¢å¤–è¿è¡Œæ—¶å¼€é”€</li>
<li><strong>æ— åƒåœ¾å›æ”¶</strong>ï¼šé€šè¿‡æ‰€æœ‰æƒç³»ç»Ÿç®¡ç†å†…å­˜ï¼Œæ€§èƒ½å¯é¢„æµ‹</li>
<li><strong>ä¼˜ç§€çš„å¹¶å‘æ¨¡å‹</strong>ï¼šåœ¨ç¼–è¯‘æœŸå°±èƒ½é˜²æ­¢æ•°æ®ç«äº‰</li>
<li><strong>ä¸°å¯Œçš„ç±»å‹ç³»ç»Ÿ</strong>ï¼šå¼ºç±»å‹ + ç±»å‹æ¨å¯¼ï¼Œä»£ç æ›´å®‰å…¨ä¹Ÿæ›´ç®€æ´</li>
</ul>
<hr>
<h2 id="2-ç¯å¢ƒæ­å»º"><a href="#2-ç¯å¢ƒæ­å»º" class="headerlink" title="2. ç¯å¢ƒæ­å»º"></a>2. ç¯å¢ƒæ­å»º</h2><h3 id="å®‰è£…-Rust"><a href="#å®‰è£…-Rust" class="headerlink" title="å®‰è£… Rust"></a>å®‰è£… Rust</h3><p>é€šè¿‡å®˜æ–¹å·¥å…· <code>rustup</code> å®‰è£…ï¼š</p>
<pre><code class="highlight bash"><span class="comment"># macOS / Linux</span>
curl --proto <span class="string">&#x27;=https&#x27;</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh

<span class="comment"># éªŒè¯å®‰è£…</span>
rustc --version
cargo --version</code></pre>

<h3 id="æ ¸å¿ƒå·¥å…·é“¾"><a href="#æ ¸å¿ƒå·¥å…·é“¾" class="headerlink" title="æ ¸å¿ƒå·¥å…·é“¾"></a>æ ¸å¿ƒå·¥å…·é“¾</h3><table>
<thead>
<tr>
<th>å·¥å…·</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>rustc</code></td>
<td>Rust ç¼–è¯‘å™¨</td>
</tr>
<tr>
<td><code>cargo</code></td>
<td>åŒ…ç®¡ç†å™¨ &amp; æ„å»ºå·¥å…·</td>
</tr>
<tr>
<td><code>rustup</code></td>
<td>å·¥å…·é“¾ç®¡ç†å™¨</td>
</tr>
<tr>
<td><code>rustfmt</code></td>
<td>ä»£ç æ ¼å¼åŒ–å·¥å…·</td>
</tr>
<tr>
<td><code>clippy</code></td>
<td>ä»£ç é™æ€åˆ†æå·¥å…·</td>
</tr>
</tbody></table>
<h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><pre><code class="highlight bash"><span class="comment"># åˆ›å»ºæ–°é¡¹ç›®</span>
cargo new hello_rust
<span class="built_in">cd</span> hello_rust

<span class="comment"># è¿è¡Œé¡¹ç›®</span>
cargo run

<span class="comment"># ç¼–è¯‘ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰</span>
cargo build

<span class="comment"># ç¼–è¯‘ï¼ˆå‘å¸ƒæ¨¡å¼ï¼Œå¼€å¯ä¼˜åŒ–ï¼‰</span>
cargo build --release</code></pre>

<hr>
<h2 id="3-åŸºæœ¬è¯­æ³•"><a href="#3-åŸºæœ¬è¯­æ³•" class="headerlink" title="3. åŸºæœ¬è¯­æ³•"></a>3. åŸºæœ¬è¯­æ³•</h2><h3 id="3-1-Hello-World"><a href="#3-1-Hello-World" class="headerlink" title="3.1 Hello, World!"></a>3.1 Hello, World!</h3><pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="built_in">println!</span>(<span class="string">&quot;Hello, World!&quot;</span>);
&#125;</code></pre>

<blockquote>
<p><code>println!</code> æ˜¯ä¸€ä¸ª <strong>å®</strong>ï¼ˆmacroï¼‰ï¼Œä¸æ˜¯å‡½æ•°ï¼Œæ³¨æ„åé¢çš„ <code>!</code>ã€‚</p>
</blockquote>
<h3 id="3-2-å˜é‡ä¸å¯å˜æ€§"><a href="#3-2-å˜é‡ä¸å¯å˜æ€§" class="headerlink" title="3.2 å˜é‡ä¸å¯å˜æ€§"></a>3.2 å˜é‡ä¸å¯å˜æ€§</h3><p>Rust ä¸­çš„å˜é‡ <strong>é»˜è®¤ä¸å¯å˜</strong>ï¼ˆimmutableï¼‰ï¼Œéœ€è¦æ˜¾å¼å£°æ˜ <code>mut</code> æ‰èƒ½ä¿®æ”¹ã€‚</p>
<pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;          <span class="comment">// ä¸å¯å˜å˜é‡</span>
    <span class="comment">// x = 6;           // âŒ ç¼–è¯‘é”™è¯¯ï¼</span>

    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">y</span> = <span class="number">10</span>;     <span class="comment">// å¯å˜å˜é‡</span>
    y = <span class="number">20</span>;             <span class="comment">// âœ… å¯ä»¥ä¿®æ”¹</span>

    <span class="keyword">let</span> <span class="variable">z</span>: <span class="type">i32</span> = <span class="number">42</span>;    <span class="comment">// æ˜¾å¼æŒ‡å®šç±»å‹</span>

    <span class="comment">// å˜é‡é®è”½ï¼ˆShadowingï¼‰</span>
    <span class="keyword">let</span> <span class="variable">x</span> = x + <span class="number">1</span>;      <span class="comment">// âœ… é‡æ–°ç»‘å®šï¼Œå…è®¸æ”¹å˜ç±»å‹</span>
    <span class="keyword">let</span> <span class="variable">x</span> = <span class="string">&quot;hello&quot;</span>;    <span class="comment">// âœ… ç”šè‡³å¯ä»¥å˜æˆä¸åŒç±»å‹</span>
&#125;</code></pre>

<h3 id="3-3-å¸¸é‡"><a href="#3-3-å¸¸é‡" class="headerlink" title="3.3 å¸¸é‡"></a>3.3 å¸¸é‡</h3><pre><code class="highlight rust"><span class="keyword">const</span> MAX_POINTS: <span class="type">u32</span> = <span class="number">100_000</span>;  <span class="comment">// å¸¸é‡å¿…é¡»æ ‡æ³¨ç±»å‹ï¼Œä½¿ç”¨å¤§å†™è›‡å½¢å‘½å</span></code></pre>

<hr>
<h2 id="4-æ•°æ®ç±»å‹"><a href="#4-æ•°æ®ç±»å‹" class="headerlink" title="4. æ•°æ®ç±»å‹"></a>4. æ•°æ®ç±»å‹</h2><h3 id="4-1-æ ‡é‡ç±»å‹"><a href="#4-1-æ ‡é‡ç±»å‹" class="headerlink" title="4.1 æ ‡é‡ç±»å‹"></a>4.1 æ ‡é‡ç±»å‹</h3><pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// æ•´æ•°ç±»å‹ï¼ši8, i16, i32, i64, i128, isize</span>
    <span class="comment">//          u8, u16, u32, u64, u128, usize</span>
    <span class="keyword">let</span> <span class="variable">a</span>: <span class="type">i32</span> = -<span class="number">42</span>;
    <span class="keyword">let</span> <span class="variable">b</span>: <span class="type">u64</span> = <span class="number">100</span>;

    <span class="comment">// æµ®ç‚¹æ•°ï¼šf32, f64ï¼ˆé»˜è®¤ f64ï¼‰</span>
    <span class="keyword">let</span> <span class="variable">pi</span>: <span class="type">f64</span> = <span class="number">3.14159</span>;

    <span class="comment">// å¸ƒå°”ç±»å‹</span>
    <span class="keyword">let</span> <span class="variable">is_active</span>: <span class="type">bool</span> = <span class="literal">true</span>;

    <span class="comment">// å­—ç¬¦ç±»å‹ï¼ˆ4 å­—èŠ‚ï¼Œæ”¯æŒ Unicodeï¼‰</span>
    <span class="keyword">let</span> <span class="variable">c</span>: <span class="type">char</span> = <span class="string">&#x27;ä¸­&#x27;</span>;
    <span class="keyword">let</span> <span class="variable">emoji</span>: <span class="type">char</span> = <span class="string">&#x27;ğŸ¦€&#x27;</span>;
&#125;</code></pre>

<h3 id="4-2-å¤åˆç±»å‹"><a href="#4-2-å¤åˆç±»å‹" class="headerlink" title="4.2 å¤åˆç±»å‹"></a>4.2 å¤åˆç±»å‹</h3><pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// å…ƒç»„ï¼ˆTupleï¼‰â€”â€” å›ºå®šé•¿åº¦ï¼Œå¯åŒ…å«ä¸åŒç±»å‹</span>
    <span class="keyword">let</span> <span class="variable">tup</span>: (<span class="type">i32</span>, <span class="type">f64</span>, <span class="type">char</span>) = (<span class="number">500</span>, <span class="number">6.4</span>, <span class="string">&#x27;A&#x27;</span>);
    <span class="keyword">let</span> (x, y, z) = tup;           <span class="comment">// è§£æ„</span>
    <span class="keyword">let</span> <span class="variable">first</span> = tup.<span class="number">0</span>;             <span class="comment">// ç´¢å¼•è®¿é—®</span>

    <span class="comment">// æ•°ç»„ï¼ˆArrayï¼‰â€”â€” å›ºå®šé•¿åº¦ï¼ŒåŒä¸€ç±»å‹</span>
    <span class="keyword">let</span> <span class="variable">arr</span>: [<span class="type">i32</span>; <span class="number">5</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];
    <span class="keyword">let</span> <span class="variable">first</span> = arr[<span class="number">0</span>];

    <span class="keyword">let</span> <span class="variable">zeros</span> = [<span class="number">0</span>; <span class="number">10</span>];           <span class="comment">// 10 ä¸ª 0</span>
&#125;</code></pre>

<hr>
<h2 id="5-å‡½æ•°"><a href="#5-å‡½æ•°" class="headerlink" title="5. å‡½æ•°"></a>5. å‡½æ•°</h2><pre><code class="highlight rust"><span class="comment">// åŸºæœ¬å‡½æ•°</span>
<span class="keyword">fn</span> <span class="title function_">add</span>(x: <span class="type">i32</span>, y: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;
    x + y   <span class="comment">// æœ€åä¸€ä¸ªè¡¨è¾¾å¼ä½œä¸ºè¿”å›å€¼ï¼ˆæ— åˆ†å·ï¼‰</span>
&#125;

<span class="comment">// æ— è¿”å›å€¼ï¼ˆè¿”å›å•å…ƒç±»å‹ ()ï¼‰</span>
<span class="keyword">fn</span> <span class="title function_">greet</span>(name: &amp;<span class="type">str</span>) &#123;
    <span class="built_in">println!</span>(<span class="string">&quot;Hello, &#123;&#125;!&quot;</span>, name);
&#125;

<span class="comment">// æå‰è¿”å›</span>
<span class="keyword">fn</span> <span class="title function_">abs</span>(x: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;
    <span class="keyword">if</span> x &lt; <span class="number">0</span> &#123;
        <span class="keyword">return</span> -x;
    &#125;
    x
&#125;

<span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">result</span> = <span class="title function_ invoke__">add</span>(<span class="number">3</span>, <span class="number">5</span>);
    <span class="built_in">println!</span>(<span class="string">&quot;3 + 5 = &#123;&#125;&quot;</span>, result);
    <span class="title function_ invoke__">greet</span>(<span class="string">&quot;Rust&quot;</span>);
&#125;</code></pre>

<hr>
<h2 id="6-æ§åˆ¶æµ"><a href="#6-æ§åˆ¶æµ" class="headerlink" title="6. æ§åˆ¶æµ"></a>6. æ§åˆ¶æµ</h2><h3 id="6-1-æ¡ä»¶åˆ¤æ–­"><a href="#6-1-æ¡ä»¶åˆ¤æ–­" class="headerlink" title="6.1 æ¡ä»¶åˆ¤æ–­"></a>6.1 æ¡ä»¶åˆ¤æ–­</h3><pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">number</span> = <span class="number">7</span>;

    <span class="keyword">if</span> number &gt; <span class="number">5</span> &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;å¤§äº 5&quot;</span>);
    &#125; <span class="keyword">else</span> <span class="keyword">if</span> number &gt; <span class="number">0</span> &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;å¤§äº 0 ä½†ä¸å¤§äº 5&quot;</span>);
    &#125; <span class="keyword">else</span> &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;å°äºç­‰äº 0&quot;</span>);
    &#125;

    <span class="comment">// if æ˜¯è¡¨è¾¾å¼ï¼Œå¯ä»¥ç”¨äºèµ‹å€¼</span>
    <span class="keyword">let</span> <span class="variable">status</span> = <span class="keyword">if</span> number &gt; <span class="number">0</span> &#123; <span class="string">&quot;æ­£æ•°&quot;</span> &#125; <span class="keyword">else</span> &#123; <span class="string">&quot;éæ­£æ•°&quot;</span> &#125;;
&#125;</code></pre>

<h3 id="6-2-å¾ªç¯"><a href="#6-2-å¾ªç¯" class="headerlink" title="6.2 å¾ªç¯"></a>6.2 å¾ªç¯</h3><pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// loop â€”â€” æ— é™å¾ªç¯</span>
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">count</span> = <span class="number">0</span>;
    <span class="keyword">let</span> <span class="variable">result</span> = <span class="keyword">loop</span> &#123;
        count += <span class="number">1</span>;
        <span class="keyword">if</span> count == <span class="number">10</span> &#123;
            <span class="keyword">break</span> count * <span class="number">2</span>;    <span class="comment">// break å¯ä»¥è¿”å›å€¼</span>
        &#125;
    &#125;;

    <span class="comment">// while å¾ªç¯</span>
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">n</span> = <span class="number">3</span>;
    <span class="keyword">while</span> n &gt; <span class="number">0</span> &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;!&quot;</span>, n);
        n -= <span class="number">1</span>;
    &#125;

    <span class="comment">// for å¾ªç¯ï¼ˆæ¨èæ–¹å¼ï¼‰</span>
    <span class="keyword">let</span> <span class="variable">arr</span> = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>];
    <span class="keyword">for</span> <span class="variable">element</span> <span class="keyword">in</span> arr.<span class="title function_ invoke__">iter</span>() &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;å€¼: &#123;&#125;&quot;</span>, element);
    &#125;

    <span class="comment">// èŒƒå›´è¿­ä»£</span>
    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="number">5</span> &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;i = &#123;&#125;&quot;</span>, i);     <span class="comment">// 0, 1, 2, 3, 4</span>
    &#125;

    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> (<span class="number">1</span>..=<span class="number">3</span>).<span class="title function_ invoke__">rev</span>() &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;å€’æ•°: &#123;&#125;&quot;</span>, i);   <span class="comment">// 3, 2, 1</span>
    &#125;
&#125;</code></pre>

<hr>
<h2 id="7-æ‰€æœ‰æƒç³»ç»Ÿï¼ˆæ ¸å¿ƒæ¦‚å¿µï¼‰"><a href="#7-æ‰€æœ‰æƒç³»ç»Ÿï¼ˆæ ¸å¿ƒæ¦‚å¿µï¼‰" class="headerlink" title="7. æ‰€æœ‰æƒç³»ç»Ÿï¼ˆæ ¸å¿ƒæ¦‚å¿µï¼‰"></a>7. æ‰€æœ‰æƒç³»ç»Ÿï¼ˆæ ¸å¿ƒæ¦‚å¿µï¼‰</h2><p>æ‰€æœ‰æƒæ˜¯ Rust æœ€ç‹¬ç‰¹çš„ç‰¹æ€§ï¼Œå®ƒè®© Rust æ— éœ€åƒåœ¾å›æ”¶å™¨å³å¯ä¿è¯å†…å­˜å®‰å…¨ã€‚</p>
<h3 id="7-1-æ‰€æœ‰æƒè§„åˆ™"><a href="#7-1-æ‰€æœ‰æƒè§„åˆ™" class="headerlink" title="7.1 æ‰€æœ‰æƒè§„åˆ™"></a>7.1 æ‰€æœ‰æƒè§„åˆ™</h3><ol>
<li>Rust ä¸­æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ª <strong>æ‰€æœ‰è€…</strong>ï¼ˆownerï¼‰</li>
<li>å€¼åœ¨ä»»æ„æ—¶åˆ»æœ‰ä¸”åªæœ‰ <strong>ä¸€ä¸ªæ‰€æœ‰è€…</strong></li>
<li>å½“æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå€¼å°†è¢« <strong>è‡ªåŠ¨ä¸¢å¼ƒ</strong>ï¼ˆdropï¼‰</li>
</ol>
<pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);
    <span class="keyword">let</span> <span class="variable">s2</span> = s1;        <span class="comment">// s1 çš„æ‰€æœ‰æƒè½¬ç§»ï¼ˆmoveï¼‰ç»™ s2</span>
    <span class="comment">// println!(&quot;&#123;&#125;&quot;, s1);  // âŒ ç¼–è¯‘é”™è¯¯ï¼s1 å·²å¤±æ•ˆ</span>

    <span class="keyword">let</span> <span class="variable">s3</span> = s2.<span class="title function_ invoke__">clone</span>(); <span class="comment">// æ·±æ‹·è´ï¼Œs2 ä»ç„¶æœ‰æ•ˆ</span>
    <span class="built_in">println!</span>(<span class="string">&quot;s2 = &#123;&#125;, s3 = &#123;&#125;&quot;</span>, s2, s3);  <span class="comment">// âœ…</span>
&#125;</code></pre>

<h3 id="7-2-å¼•ç”¨ä¸å€Ÿç”¨"><a href="#7-2-å¼•ç”¨ä¸å€Ÿç”¨" class="headerlink" title="7.2 å¼•ç”¨ä¸å€Ÿç”¨"></a>7.2 å¼•ç”¨ä¸å€Ÿç”¨</h3><pre><code class="highlight rust"><span class="comment">// ä¸å¯å˜å¼•ç”¨ï¼ˆå¯ä»¥æœ‰å¤šä¸ªï¼‰</span>
<span class="keyword">fn</span> <span class="title function_">calculate_length</span>(s: &amp;<span class="type">String</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;
    s.<span class="title function_ invoke__">len</span>()
&#125;

<span class="comment">// å¯å˜å¼•ç”¨ï¼ˆåŒä¸€ä½œç”¨åŸŸåªèƒ½æœ‰ä¸€ä¸ªï¼‰</span>
<span class="keyword">fn</span> <span class="title function_">push_str</span>(s: &amp;<span class="keyword">mut</span> <span class="type">String</span>) &#123;
    s.<span class="title function_ invoke__">push_str</span>(<span class="string">&quot; world&quot;</span>);
&#125;

<span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);

    <span class="keyword">let</span> <span class="variable">len</span> = <span class="title function_ invoke__">calculate_length</span>(&amp;s);       <span class="comment">// ä¸å¯å˜å€Ÿç”¨</span>
    <span class="built_in">println!</span>(<span class="string">&quot;é•¿åº¦: &#123;&#125;&quot;</span>, len);

    <span class="title function_ invoke__">push_str</span>(&amp;<span class="keyword">mut</span> s);                     <span class="comment">// å¯å˜å€Ÿç”¨</span>
    <span class="built_in">println!</span>(<span class="string">&quot;ä¿®æ”¹å: &#123;&#125;&quot;</span>, s);

    <span class="comment">// è§„åˆ™ï¼šä¸å¯å˜å¼•ç”¨å’Œå¯å˜å¼•ç”¨ä¸èƒ½åŒæ—¶å­˜åœ¨</span>
    <span class="keyword">let</span> <span class="variable">r1</span> = &amp;s;
    <span class="keyword">let</span> <span class="variable">r2</span> = &amp;s;       <span class="comment">// âœ… å¤šä¸ªä¸å¯å˜å¼•ç”¨</span>
    <span class="comment">// let r3 = &amp;mut s; // âŒ å·²æœ‰ä¸å¯å˜å¼•ç”¨æ—¶ä¸èƒ½å¯å˜å€Ÿç”¨</span>
    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, r1, r2);
&#125;</code></pre>

<h3 id="7-3-ç”Ÿå‘½å‘¨æœŸï¼ˆLifetimeï¼‰"><a href="#7-3-ç”Ÿå‘½å‘¨æœŸï¼ˆLifetimeï¼‰" class="headerlink" title="7.3 ç”Ÿå‘½å‘¨æœŸï¼ˆLifetimeï¼‰"></a>7.3 ç”Ÿå‘½å‘¨æœŸï¼ˆLifetimeï¼‰</h3><p>ç”Ÿå‘½å‘¨æœŸç¡®ä¿å¼•ç”¨å§‹ç»ˆæœ‰æ•ˆï¼Œç¼–è¯‘å™¨é€šå¸¸èƒ½è‡ªåŠ¨æ¨æ–­ï¼Œå¤æ‚åœºæ™¯éœ€æ‰‹åŠ¨æ ‡æ³¨ã€‚</p>
<pre><code class="highlight rust"><span class="comment">// &#x27;a æ˜¯ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ï¼Œè¡¨ç¤ºè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸä¸å‚æ•°ä¸€è‡´</span>
<span class="keyword">fn</span> <span class="title function_">longest</span>&lt;<span class="symbol">&#x27;a</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="type">str</span>, y: &amp;<span class="symbol">&#x27;a</span> <span class="type">str</span>) <span class="punctuation">-&gt;</span> &amp;<span class="symbol">&#x27;a</span> <span class="type">str</span> &#123;
    <span class="keyword">if</span> x.<span class="title function_ invoke__">len</span>() &gt; y.<span class="title function_ invoke__">len</span>() &#123; x &#125; <span class="keyword">else</span> &#123; y &#125;
&#125;

<span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;long string&quot;</span>);
    <span class="keyword">let</span> <span class="variable">result</span>;
    &#123;
        <span class="keyword">let</span> <span class="variable">s2</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hi&quot;</span>);
        result = <span class="title function_ invoke__">longest</span>(s1.<span class="title function_ invoke__">as_str</span>(), s2.<span class="title function_ invoke__">as_str</span>());
        <span class="built_in">println!</span>(<span class="string">&quot;æœ€é•¿çš„æ˜¯: &#123;&#125;&quot;</span>, result);
    &#125;
&#125;</code></pre>

<hr>
<h2 id="8-ç»“æ„ä½“ä¸æšä¸¾"><a href="#8-ç»“æ„ä½“ä¸æšä¸¾" class="headerlink" title="8. ç»“æ„ä½“ä¸æšä¸¾"></a>8. ç»“æ„ä½“ä¸æšä¸¾</h2><h3 id="8-1-ç»“æ„ä½“ï¼ˆStructï¼‰"><a href="#8-1-ç»“æ„ä½“ï¼ˆStructï¼‰" class="headerlink" title="8.1 ç»“æ„ä½“ï¼ˆStructï¼‰"></a>8.1 ç»“æ„ä½“ï¼ˆStructï¼‰</h3><pre><code class="highlight rust"><span class="comment">// å®šä¹‰ç»“æ„ä½“</span>
<span class="keyword">struct</span> <span class="title class_">User</span> &#123;
    username: <span class="type">String</span>,
    email: <span class="type">String</span>,
    age: <span class="type">u32</span>,
    active: <span class="type">bool</span>,
&#125;

<span class="comment">// ä¸ºç»“æ„ä½“å®ç°æ–¹æ³•</span>
<span class="keyword">impl</span> <span class="title class_">User</span> &#123;
    <span class="comment">// å…³è”å‡½æ•°ï¼ˆç±»ä¼¼æ„é€ å‡½æ•°ï¼‰</span>
    <span class="keyword">fn</span> <span class="title function_">new</span>(username: <span class="type">String</span>, email: <span class="type">String</span>, age: <span class="type">u32</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;
        User &#123;
            username,
            email,
            age,
            active: <span class="literal">true</span>,
        &#125;
    &#125;

    <span class="comment">// æ–¹æ³•ï¼ˆ&amp;self ä¸ºä¸å¯å˜å¼•ç”¨ï¼‰</span>
    <span class="keyword">fn</span> <span class="title function_">summary</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;
        <span class="built_in">format!</span>(<span class="string">&quot;&#123;&#125; &lt;&#123;&#125;&gt;, &#123;&#125;å²&quot;</span>, <span class="keyword">self</span>.username, <span class="keyword">self</span>.email, <span class="keyword">self</span>.age)
    &#125;

    <span class="comment">// å¯å˜æ–¹æ³•</span>
    <span class="keyword">fn</span> <span class="title function_">deactivate</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;
        <span class="keyword">self</span>.active = <span class="literal">false</span>;
    &#125;
&#125;

<span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">user</span> = User::<span class="title function_ invoke__">new</span>(
        <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;å¼ ä¸‰&quot;</span>),
        <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;zhangsan@example.com&quot;</span>),
        <span class="number">25</span>,
    );
    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, user.<span class="title function_ invoke__">summary</span>());
    user.<span class="title function_ invoke__">deactivate</span>();
&#125;</code></pre>

<h3 id="8-2-æšä¸¾ï¼ˆEnumï¼‰"><a href="#8-2-æšä¸¾ï¼ˆEnumï¼‰" class="headerlink" title="8.2 æšä¸¾ï¼ˆEnumï¼‰"></a>8.2 æšä¸¾ï¼ˆEnumï¼‰</h3><pre><code class="highlight rust"><span class="comment">// æšä¸¾å¯ä»¥æºå¸¦æ•°æ®</span>
<span class="keyword">enum</span> <span class="title class_">Message</span> &#123;
    Quit,
    <span class="title function_ invoke__">Echo</span>(<span class="type">String</span>),
    Move &#123; x: <span class="type">i32</span>, y: <span class="type">i32</span> &#125;,
    <span class="title function_ invoke__">Color</span>(<span class="type">u8</span>, <span class="type">u8</span>, <span class="type">u8</span>),
&#125;

<span class="keyword">impl</span> <span class="title class_">Message</span> &#123;
    <span class="keyword">fn</span> <span class="title function_">call</span>(&amp;<span class="keyword">self</span>) &#123;
        <span class="keyword">match</span> <span class="keyword">self</span> &#123;
            Message::Quit =&gt; <span class="built_in">println!</span>(<span class="string">&quot;é€€å‡º&quot;</span>),
            Message::<span class="title function_ invoke__">Echo</span>(text) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;å›æ˜¾: &#123;&#125;&quot;</span>, text),
            Message::Move &#123; x, y &#125; =&gt; <span class="built_in">println!</span>(<span class="string">&quot;ç§»åŠ¨åˆ° (&#123;&#125;, &#123;&#125;)&quot;</span>, x, y),
            Message::<span class="title function_ invoke__">Color</span>(r, g, b) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;é¢œè‰²: (&#123;&#125;, &#123;&#125;, &#123;&#125;)&quot;</span>, r, g, b),
        &#125;
    &#125;
&#125;

<span class="comment">// Option æšä¸¾ â€”â€” Rust ç”¨å®ƒæ›¿ä»£ null</span>
<span class="keyword">fn</span> <span class="title function_">find_item</span>(id: <span class="type">u32</span>) <span class="punctuation">-&gt;</span> <span class="type">Option</span>&lt;<span class="type">String</span>&gt; &#123;
    <span class="keyword">if</span> id == <span class="number">1</span> &#123;
        <span class="title function_ invoke__">Some</span>(<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;æ‰¾åˆ°äº†&quot;</span>))
    &#125; <span class="keyword">else</span> &#123;
        <span class="literal">None</span>
    &#125;
&#125;

<span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">msg</span> = Message::Move &#123; x: <span class="number">10</span>, y: <span class="number">20</span> &#125;;
    msg.<span class="title function_ invoke__">call</span>();

    <span class="comment">// å¤„ç† Option</span>
    <span class="keyword">match</span> <span class="title function_ invoke__">find_item</span>(<span class="number">1</span>) &#123;
        <span class="title function_ invoke__">Some</span>(item) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, item),
        <span class="literal">None</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;æœªæ‰¾åˆ°&quot;</span>),
    &#125;

    <span class="comment">// æ›´ç®€æ´çš„å†™æ³•</span>
    <span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Some</span>(item) = <span class="title function_ invoke__">find_item</span>(<span class="number">1</span>) &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, item);
    &#125;
&#125;</code></pre>

<hr>
<h2 id="9-æ¨¡å¼åŒ¹é…"><a href="#9-æ¨¡å¼åŒ¹é…" class="headerlink" title="9. æ¨¡å¼åŒ¹é…"></a>9. æ¨¡å¼åŒ¹é…</h2><pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;

    <span class="comment">// match è¡¨è¾¾å¼ï¼ˆå¿…é¡»ç©·å°½æ‰€æœ‰å¯èƒ½ï¼‰</span>
    <span class="keyword">match</span> x &#123;
        <span class="number">1</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;ä¸€&quot;</span>),
        <span class="number">2</span> | <span class="number">3</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;äºŒæˆ–ä¸‰&quot;</span>),       <span class="comment">// å¤šä¸ªå€¼</span>
        <span class="number">4</span>..=<span class="number">9</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;å››åˆ°ä¹&quot;</span>),        <span class="comment">// èŒƒå›´</span>
        _ =&gt; <span class="built_in">println!</span>(<span class="string">&quot;å…¶ä»–&quot;</span>),              <span class="comment">// é€šé…ç¬¦</span>
    &#125;

    <span class="comment">// è§£æ„åŒ¹é…</span>
    <span class="keyword">let</span> <span class="variable">point</span> = (<span class="number">3</span>, -<span class="number">5</span>);
    <span class="keyword">match</span> point &#123;
        (<span class="number">0</span>, <span class="number">0</span>) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;åŸç‚¹&quot;</span>),
        (x, <span class="number">0</span>) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;x è½´ä¸Š, x = &#123;&#125;&quot;</span>, x),
        (<span class="number">0</span>, y) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;y è½´ä¸Š, y = &#123;&#125;&quot;</span>, y),
        (x, y) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;ç‚¹ (&#123;&#125;, &#123;&#125;)&quot;</span>, x, y),
    &#125;

    <span class="comment">// å¸¦å®ˆå«çš„åŒ¹é…</span>
    <span class="keyword">let</span> <span class="variable">num</span> = <span class="title function_ invoke__">Some</span>(<span class="number">42</span>);
    <span class="keyword">match</span> num &#123;
        <span class="title function_ invoke__">Some</span>(n) <span class="keyword">if</span> n &lt; <span class="number">0</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;è´Ÿæ•°&quot;</span>),
        <span class="title function_ invoke__">Some</span>(n) <span class="keyword">if</span> n &gt; <span class="number">0</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;æ­£æ•°: &#123;&#125;&quot;</span>, n),
        <span class="title function_ invoke__">Some</span>(<span class="number">0</span>) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;é›¶&quot;</span>),
        <span class="literal">None</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;æ— å€¼&quot;</span>),
        _ =&gt; <span class="built_in">unreachable!</span>(),
    &#125;
&#125;</code></pre>

<hr>
<h2 id="10-é”™è¯¯å¤„ç†"><a href="#10-é”™è¯¯å¤„ç†" class="headerlink" title="10. é”™è¯¯å¤„ç†"></a>10. é”™è¯¯å¤„ç†</h2><p>Rust æ²¡æœ‰å¼‚å¸¸æœºåˆ¶ï¼Œä½¿ç”¨ <code>Result&lt;T, E&gt;</code> å’Œ <code>Option&lt;T&gt;</code> å¤„ç†é”™è¯¯ã€‚</p>
<pre><code class="highlight rust"><span class="keyword">use</span> std::fs;
<span class="keyword">use</span> std::io;

<span class="comment">// Result è¡¨ç¤ºå¯èƒ½å¤±è´¥çš„æ“ä½œ</span>
<span class="keyword">fn</span> <span class="title function_">read_config</span>(path: &amp;<span class="type">str</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">String</span>, io::Error&gt; &#123;
    fs::<span class="title function_ invoke__">read_to_string</span>(path)
&#125;

<span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// match å¤„ç†</span>
    <span class="keyword">match</span> <span class="title function_ invoke__">read_config</span>(<span class="string">&quot;config.toml&quot;</span>) &#123;
        <span class="title function_ invoke__">Ok</span>(content) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;é…ç½®å†…å®¹: &#123;&#125;&quot;</span>, content),
        <span class="title function_ invoke__">Err</span>(e) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;è¯»å–å¤±è´¥: &#123;&#125;&quot;</span>, e),
    &#125;

    <span class="comment">// unwrap_or_else</span>
    <span class="keyword">let</span> <span class="variable">content</span> = <span class="title function_ invoke__">read_config</span>(<span class="string">&quot;config.toml&quot;</span>)
        .<span class="title function_ invoke__">unwrap_or_else</span>(|_| <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;é»˜è®¤é…ç½®&quot;</span>));

    <span class="comment">// ? è¿ç®—ç¬¦ â€”â€” è‡ªåŠ¨ä¼ æ’­é”™è¯¯ï¼ˆåªèƒ½åœ¨è¿”å› Result çš„å‡½æ•°ä¸­ä½¿ç”¨ï¼‰</span>
    <span class="comment">// fn load() -&gt; Result&lt;String, io::Error&gt; &#123;</span>
    <span class="comment">//     let content = fs::read_to_string(&quot;file.txt&quot;)?;</span>
    <span class="comment">//     Ok(content)</span>
    <span class="comment">// &#125;</span>
&#125;</code></pre>

<h3 id="è¿ç®—ç¬¦é“¾å¼è°ƒç”¨"><a href="#è¿ç®—ç¬¦é“¾å¼è°ƒç”¨" class="headerlink" title="? è¿ç®—ç¬¦é“¾å¼è°ƒç”¨"></a><code>?</code> è¿ç®—ç¬¦é“¾å¼è°ƒç”¨</h3><pre><code class="highlight rust"><span class="keyword">use</span> std::fs::File;
<span class="keyword">use</span> std::io::&#123;<span class="keyword">self</span>, Read&#125;;

<span class="keyword">fn</span> <span class="title function_">read_username_from_file</span>() <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">String</span>, io::Error&gt; &#123;
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">new</span>();
    File::<span class="title function_ invoke__">open</span>(<span class="string">&quot;username.txt&quot;</span>)?.<span class="title function_ invoke__">read_to_string</span>(&amp;<span class="keyword">mut</span> s)?;
    <span class="title function_ invoke__">Ok</span>(s)
&#125;</code></pre>

<hr>
<h2 id="11-æ³›å‹ä¸-Trait"><a href="#11-æ³›å‹ä¸-Trait" class="headerlink" title="11. æ³›å‹ä¸ Trait"></a>11. æ³›å‹ä¸ Trait</h2><h3 id="11-1-æ³›å‹"><a href="#11-1-æ³›å‹" class="headerlink" title="11.1 æ³›å‹"></a>11.1 æ³›å‹</h3><pre><code class="highlight rust"><span class="comment">// æ³›å‹å‡½æ•°</span>
<span class="keyword">fn</span> <span class="title function_">largest</span>&lt;T: <span class="built_in">PartialOrd</span>&gt;(list: &amp;[T]) <span class="punctuation">-&gt;</span> &amp;T &#123;
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">max</span> = &amp;list[<span class="number">0</span>];
    <span class="keyword">for</span> <span class="variable">item</span> <span class="keyword">in</span> &amp;list[<span class="number">1</span>..] &#123;
        <span class="keyword">if</span> item &gt; max &#123;
            max = item;
        &#125;
    &#125;
    max
&#125;

<span class="comment">// æ³›å‹ç»“æ„ä½“</span>
<span class="keyword">struct</span> <span class="title class_">Point</span>&lt;T&gt; &#123;
    x: T,
    y: T,
&#125;

<span class="keyword">impl</span>&lt;T: std::fmt::Display&gt; Point&lt;T&gt; &#123;
    <span class="keyword">fn</span> <span class="title function_">show</span>(&amp;<span class="keyword">self</span>) &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;(&#123;&#125;, &#123;&#125;)&quot;</span>, <span class="keyword">self</span>.x, <span class="keyword">self</span>.y);
    &#125;
&#125;</code></pre>

<h3 id="11-2-Traitï¼ˆç±»ä¼¼æ¥å£ï¼‰"><a href="#11-2-Traitï¼ˆç±»ä¼¼æ¥å£ï¼‰" class="headerlink" title="11.2 Traitï¼ˆç±»ä¼¼æ¥å£ï¼‰"></a>11.2 Traitï¼ˆç±»ä¼¼æ¥å£ï¼‰</h3><pre><code class="highlight rust"><span class="comment">// å®šä¹‰ Trait</span>
<span class="keyword">trait</span> <span class="title class_">Summary</span> &#123;
    <span class="keyword">fn</span> <span class="title function_">summarize</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span>;

    <span class="comment">// å¯æä¾›é»˜è®¤å®ç°</span>
    <span class="keyword">fn</span> <span class="title function_">preview</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;
        <span class="built_in">format!</span>(<span class="string">&quot;&#123;&#125;...&quot;</span>, &amp;<span class="keyword">self</span>.<span class="title function_ invoke__">summarize</span>()[..<span class="number">20</span>])
    &#125;
&#125;

<span class="keyword">struct</span> <span class="title class_">Article</span> &#123;
    title: <span class="type">String</span>,
    content: <span class="type">String</span>,
&#125;

<span class="comment">// ä¸ºç±»å‹å®ç° Trait</span>
<span class="keyword">impl</span> <span class="title class_">Summary</span> <span class="keyword">for</span> <span class="title class_">Article</span> &#123;
    <span class="keyword">fn</span> <span class="title function_">summarize</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;
        <span class="built_in">format!</span>(<span class="string">&quot;&#123;&#125;: &#123;&#125;&quot;</span>, <span class="keyword">self</span>.title, <span class="keyword">self</span>.content)
    &#125;
&#125;

<span class="comment">// Trait ä½œä¸ºå‚æ•°</span>
<span class="keyword">fn</span> <span class="title function_">notify</span>(item: &amp;<span class="keyword">impl</span> <span class="title class_">Summary</span>) &#123;
    <span class="built_in">println!</span>(<span class="string">&quot;æ–°æ¶ˆæ¯: &#123;&#125;&quot;</span>, item.<span class="title function_ invoke__">summarize</span>());
&#125;

<span class="comment">// Trait Bound å†™æ³•ï¼ˆæ›´çµæ´»ï¼‰</span>
<span class="keyword">fn</span> <span class="title function_">notify_all</span>&lt;T: Summary + std::fmt::Display&gt;(item: &amp;T) &#123;
    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, item);
&#125;</code></pre>

<hr>
<h2 id="12-é›†åˆç±»å‹"><a href="#12-é›†åˆç±»å‹" class="headerlink" title="12. é›†åˆç±»å‹"></a>12. é›†åˆç±»å‹</h2><pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// Vec&lt;T&gt; â€”â€” åŠ¨æ€æ•°ç»„</span>
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">vec</span>: <span class="type">Vec</span>&lt;<span class="type">i32</span>&gt; = <span class="type">Vec</span>::<span class="title function_ invoke__">new</span>();
    vec.<span class="title function_ invoke__">push</span>(<span class="number">1</span>);
    vec.<span class="title function_ invoke__">push</span>(<span class="number">2</span>);
    vec.<span class="title function_ invoke__">push</span>(<span class="number">3</span>);

    <span class="keyword">let</span> <span class="variable">vec2</span> = <span class="built_in">vec!</span>[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>];   <span class="comment">// å®åˆ›å»º</span>

    <span class="keyword">for</span> <span class="variable">v</span> <span class="keyword">in</span> &amp;vec2 &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, v);
    &#125;

    <span class="comment">// HashMap&lt;K, V&gt; â€”â€” å“ˆå¸Œæ˜ å°„</span>
    <span class="keyword">use</span> std::collections::HashMap;

    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">scores</span>: HashMap&lt;<span class="type">String</span>, <span class="type">i32</span>&gt; = HashMap::<span class="title function_ invoke__">new</span>();
    scores.<span class="title function_ invoke__">insert</span>(<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Alice&quot;</span>), <span class="number">95</span>);
    scores.<span class="title function_ invoke__">insert</span>(<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Bob&quot;</span>), <span class="number">87</span>);

    <span class="comment">// æŸ¥è¯¢</span>
    <span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Some</span>(score) = scores.<span class="title function_ invoke__">get</span>(<span class="string">&quot;Alice&quot;</span>) &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;Alice çš„åˆ†æ•°: &#123;&#125;&quot;</span>, score);
    &#125;

    <span class="comment">// éå†</span>
    <span class="keyword">for</span> (name, score) <span class="keyword">in</span> &amp;scores &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;: &#123;&#125;&quot;</span>, name, score);
    &#125;

    <span class="comment">// String â€”â€” UTF-8 å­—ç¬¦ä¸²</span>
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Hello&quot;</span>);
    s.<span class="title function_ invoke__">push_str</span>(<span class="string">&quot;, Rust!&quot;</span>);
    s.<span class="title function_ invoke__">push</span>(<span class="string">&#x27;ğŸ¦€&#x27;</span>);
    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, s);
&#125;</code></pre>

<hr>
<h2 id="13-é—­åŒ…ä¸è¿­ä»£å™¨"><a href="#13-é—­åŒ…ä¸è¿­ä»£å™¨" class="headerlink" title="13. é—­åŒ…ä¸è¿­ä»£å™¨"></a>13. é—­åŒ…ä¸è¿­ä»£å™¨</h2><h3 id="13-1-é—­åŒ…"><a href="#13-1-é—­åŒ…" class="headerlink" title="13.1 é—­åŒ…"></a>13.1 é—­åŒ…</h3><pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// é—­åŒ… â€”â€” å¯ä»¥æ•è·ç¯å¢ƒå˜é‡çš„åŒ¿åå‡½æ•°</span>
    <span class="keyword">let</span> <span class="variable">add</span> = |a: <span class="type">i32</span>, b: <span class="type">i32</span>| <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123; a + b &#125;;
    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="title function_ invoke__">add</span>(<span class="number">2</span>, <span class="number">3</span>));

    <span class="comment">// ç±»å‹æ¨å¯¼ï¼Œç®€å†™</span>
    <span class="keyword">let</span> <span class="variable">square</span> = |x| x * x;
    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="title function_ invoke__">square</span>(<span class="number">5</span>));

    <span class="comment">// æ•è·ç¯å¢ƒå˜é‡</span>
    <span class="keyword">let</span> <span class="variable">factor</span> = <span class="number">10</span>;
    <span class="keyword">let</span> <span class="variable">multiply</span> = |x| x * factor;
    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="title function_ invoke__">multiply</span>(<span class="number">5</span>));   <span class="comment">// 50</span>
&#125;</code></pre>

<h3 id="13-2-è¿­ä»£å™¨"><a href="#13-2-è¿­ä»£å™¨" class="headerlink" title="13.2 è¿­ä»£å™¨"></a>13.2 è¿­ä»£å™¨</h3><pre><code class="highlight rust"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">numbers</span> = <span class="built_in">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];

    <span class="comment">// é“¾å¼è°ƒç”¨</span>
    <span class="keyword">let</span> <span class="variable">sum</span>: <span class="type">i32</span> = numbers.<span class="title function_ invoke__">iter</span>()
        .<span class="title function_ invoke__">filter</span>(|&amp;&amp;x| x &gt; <span class="number">2</span>)
        .<span class="title function_ invoke__">map</span>(|&amp;x| x * x)
        .<span class="title function_ invoke__">sum</span>();
    <span class="built_in">println!</span>(<span class="string">&quot;ç»“æœ: &#123;&#125;&quot;</span>, sum);   <span class="comment">// 9 + 16 + 25 = 50</span>

    <span class="comment">// collect è½¬æ¢</span>
    <span class="keyword">let</span> <span class="variable">doubled</span>: <span class="type">Vec</span>&lt;<span class="type">i32</span>&gt; = numbers.<span class="title function_ invoke__">iter</span>()
        .<span class="title function_ invoke__">map</span>(|&amp;x| x * <span class="number">2</span>)
        .<span class="title function_ invoke__">collect</span>();
    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, doubled);   <span class="comment">// [2, 4, 6, 8, 10]</span>
&#125;</code></pre>

<hr>
<h2 id="14-å¹¶å‘ç¼–ç¨‹"><a href="#14-å¹¶å‘ç¼–ç¨‹" class="headerlink" title="14. å¹¶å‘ç¼–ç¨‹"></a>14. å¹¶å‘ç¼–ç¨‹</h2><pre><code class="highlight rust"><span class="keyword">use</span> std::thread;
<span class="keyword">use</span> std::sync::&#123;Arc, Mutex&#125;;

<span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// åˆ›å»ºçº¿ç¨‹</span>
    <span class="keyword">let</span> <span class="variable">handle</span> = thread::<span class="title function_ invoke__">spawn</span>(|| &#123;
        <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..<span class="number">5</span> &#123;
            <span class="built_in">println!</span>(<span class="string">&quot;å­çº¿ç¨‹: &#123;&#125;&quot;</span>, i);
        &#125;
    &#125;);

    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..<span class="number">3</span> &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;ä¸»çº¿ç¨‹: &#123;&#125;&quot;</span>, i);
    &#125;

    handle.<span class="title function_ invoke__">join</span>().<span class="title function_ invoke__">unwrap</span>();   <span class="comment">// ç­‰å¾…å­çº¿ç¨‹å®Œæˆ</span>

    <span class="comment">// ä½¿ç”¨ Arc + Mutex å®‰å…¨å…±äº«æ•°æ®</span>
    <span class="keyword">let</span> <span class="variable">counter</span> = Arc::<span class="title function_ invoke__">new</span>(Mutex::<span class="title function_ invoke__">new</span>(<span class="number">0</span>));
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">handles</span> = <span class="built_in">vec!</span>[];

    <span class="keyword">for</span> <span class="variable">_</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="number">10</span> &#123;
        <span class="keyword">let</span> <span class="variable">counter</span> = Arc::<span class="title function_ invoke__">clone</span>(&amp;counter);
        <span class="keyword">let</span> <span class="variable">handle</span> = thread::<span class="title function_ invoke__">spawn</span>(<span class="keyword">move</span> || &#123;
            <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">num</span> = counter.<span class="title function_ invoke__">lock</span>().<span class="title function_ invoke__">unwrap</span>();
            *num += <span class="number">1</span>;
        &#125;);
        handles.<span class="title function_ invoke__">push</span>(handle);
    &#125;

    <span class="keyword">for</span> <span class="variable">handle</span> <span class="keyword">in</span> handles &#123;
        handle.<span class="title function_ invoke__">join</span>().<span class="title function_ invoke__">unwrap</span>();
    &#125;

    <span class="built_in">println!</span>(<span class="string">&quot;è®¡æ•°å™¨: &#123;&#125;&quot;</span>, *counter.<span class="title function_ invoke__">lock</span>().<span class="title function_ invoke__">unwrap</span>());   <span class="comment">// 10</span>
&#125;</code></pre>

<h3 id="æ¶ˆæ¯ä¼ é€’ï¼ˆChannelï¼‰"><a href="#æ¶ˆæ¯ä¼ é€’ï¼ˆChannelï¼‰" class="headerlink" title="æ¶ˆæ¯ä¼ é€’ï¼ˆChannelï¼‰"></a>æ¶ˆæ¯ä¼ é€’ï¼ˆChannelï¼‰</h3><pre><code class="highlight rust"><span class="keyword">use</span> std::sync::mpsc;
<span class="keyword">use</span> std::thread;

<span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> (tx, rx) = mpsc::<span class="title function_ invoke__">channel</span>();

    thread::<span class="title function_ invoke__">spawn</span>(<span class="keyword">move</span> || &#123;
        <span class="keyword">let</span> <span class="variable">messages</span> = <span class="built_in">vec!</span>[<span class="string">&quot;ä½ å¥½&quot;</span>, <span class="string">&quot;æ¥è‡ª&quot;</span>, <span class="string">&quot;å­çº¿ç¨‹&quot;</span>];
        <span class="keyword">for</span> <span class="variable">msg</span> <span class="keyword">in</span> messages &#123;
            tx.<span class="title function_ invoke__">send</span>(msg).<span class="title function_ invoke__">unwrap</span>();
        &#125;
    &#125;);

    <span class="keyword">for</span> <span class="variable">received</span> <span class="keyword">in</span> rx &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;æ”¶åˆ°: &#123;&#125;&quot;</span>, received);
    &#125;
&#125;</code></pre>

<hr>
<h2 id="15-Cargo-ä¸åŒ…ç®¡ç†"><a href="#15-Cargo-ä¸åŒ…ç®¡ç†" class="headerlink" title="15. Cargo ä¸åŒ…ç®¡ç†"></a>15. Cargo ä¸åŒ…ç®¡ç†</h2><h3 id="Cargo-toml-é…ç½®"><a href="#Cargo-toml-é…ç½®" class="headerlink" title="Cargo.toml é…ç½®"></a>Cargo.toml é…ç½®</h3><pre><code class="highlight toml"><span class="section">[package]</span>
<span class="attr">name</span> = <span class="string">&quot;my_project&quot;</span>
<span class="attr">version</span> = <span class="string">&quot;0.1.0&quot;</span>
<span class="attr">edition</span> = <span class="string">&quot;2021&quot;</span>

<span class="section">[dependencies]</span>
<span class="attr">serde</span> = &#123; version = <span class="string">&quot;1.0&quot;</span>, features = [<span class="string">&quot;derive&quot;</span>] &#125;
<span class="attr">tokio</span> = &#123; version = <span class="string">&quot;1&quot;</span>, features = [<span class="string">&quot;full&quot;</span>] &#125;
<span class="attr">reqwest</span> = <span class="string">&quot;0.11&quot;</span>

<span class="section">[dev-dependencies]</span>
<span class="attr">assert_cmd</span> = <span class="string">&quot;2.0&quot;</span></code></pre>

<h3 id="å¸¸ç”¨-Cargo-å‘½ä»¤"><a href="#å¸¸ç”¨-Cargo-å‘½ä»¤" class="headerlink" title="å¸¸ç”¨ Cargo å‘½ä»¤"></a>å¸¸ç”¨ Cargo å‘½ä»¤</h3><pre><code class="highlight bash">cargo new project_name    <span class="comment"># åˆ›å»ºé¡¹ç›®</span>
cargo build               <span class="comment"># ç¼–è¯‘</span>
cargo run                 <span class="comment"># ç¼–è¯‘å¹¶è¿è¡Œ</span>
cargo <span class="built_in">test</span>                <span class="comment"># è¿è¡Œæµ‹è¯•</span>
cargo doc --open          <span class="comment"># ç”Ÿæˆå¹¶æ‰“å¼€æ–‡æ¡£</span>
cargo <span class="built_in">fmt</span>                 <span class="comment"># æ ¼å¼åŒ–ä»£ç </span>
cargo clippy              <span class="comment"># ä»£ç æ£€æŸ¥</span>
cargo add serde           <span class="comment"># æ·»åŠ ä¾èµ–ï¼ˆéœ€ cargo-editï¼‰</span>
cargo update              <span class="comment"># æ›´æ–°ä¾èµ–</span></code></pre>

<hr>
<h2 id="16-æµ‹è¯•"><a href="#16-æµ‹è¯•" class="headerlink" title="16. æµ‹è¯•"></a>16. æµ‹è¯•</h2><pre><code class="highlight rust"><span class="comment">// å•å…ƒæµ‹è¯•ï¼ˆå†™åœ¨åŒä¸€æ–‡ä»¶ä¸­ï¼‰</span>
<span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">add</span>(a: <span class="type">i32</span>, b: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;
    a + b
&#125;

<span class="meta">#[cfg(test)]</span>
<span class="keyword">mod</span> tests &#123;
    <span class="keyword">use</span> super::*;

    <span class="meta">#[test]</span>
    <span class="keyword">fn</span> <span class="title function_">test_add</span>() &#123;
        <span class="built_in">assert_eq!</span>(<span class="title function_ invoke__">add</span>(<span class="number">2</span>, <span class="number">3</span>), <span class="number">5</span>);
    &#125;

    <span class="meta">#[test]</span>
    <span class="keyword">fn</span> <span class="title function_">test_add_negative</span>() &#123;
        <span class="built_in">assert_eq!</span>(<span class="title function_ invoke__">add</span>(-<span class="number">1</span>, <span class="number">1</span>), <span class="number">0</span>);
    &#125;

    <span class="meta">#[test]</span>
    <span class="meta">#[should_panic(expected = <span class="string">&quot;æº¢å‡º&quot;</span>)]</span>
    <span class="keyword">fn</span> <span class="title function_">test_overflow</span>() &#123;
        <span class="built_in">panic!</span>(<span class="string">&quot;æº¢å‡º&quot;</span>);
    &#125;
&#125;</code></pre>

<hr>
<h2 id="17-å¸¸ç”¨å®é€Ÿè§ˆ"><a href="#17-å¸¸ç”¨å®é€Ÿè§ˆ" class="headerlink" title="17. å¸¸ç”¨å®é€Ÿè§ˆ"></a>17. å¸¸ç”¨å®é€Ÿè§ˆ</h2><table>
<thead>
<tr>
<th>å®</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td><code>println!</code> &#x2F; <code>eprintln!</code></td>
<td>æ ‡å‡†è¾“å‡º &#x2F; é”™è¯¯è¾“å‡º</td>
</tr>
<tr>
<td><code>format!</code></td>
<td>æ ¼å¼åŒ–å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td><code>vec!</code></td>
<td>åˆ›å»º Vec</td>
</tr>
<tr>
<td><code>dbg!</code></td>
<td>è°ƒè¯•æ‰“å°ï¼ˆå«æ–‡ä»¶åå’Œè¡Œå·ï¼‰</td>
</tr>
<tr>
<td><code>todo!</code></td>
<td>æ ‡è®°æœªå®Œæˆä»£ç </td>
</tr>
<tr>
<td><code>unimplemented!</code></td>
<td>æ ‡è®°æœªå®ç°ä»£ç </td>
</tr>
<tr>
<td><code>assert!</code> &#x2F; <code>assert_eq!</code> &#x2F; <code>assert_ne!</code></td>
<td>æ–­è¨€</td>
</tr>
<tr>
<td><code>cfg!</code></td>
<td>ç¼–è¯‘æœŸæ¡ä»¶æ£€æŸ¥</td>
</tr>
</tbody></table>
<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Rust çš„å­¦ä¹ æ›²çº¿è™½ç„¶è¾ƒé™¡ï¼Œä½†ä¸€æ—¦æŒæ¡æ‰€æœ‰æƒã€å€Ÿç”¨å’Œç”Ÿå‘½å‘¨æœŸè¿™äº›æ ¸å¿ƒæ¦‚å¿µï¼Œå°±èƒ½ç¼–å†™å‡ºæ—¢å®‰å…¨åˆé«˜æ•ˆçš„ä»£ç ã€‚å»ºè®®æŒ‰ä»¥ä¸‹è·¯å¾„å­¦ä¹ ï¼š</p>
<ol>
<li><strong>åŸºç¡€è¯­æ³•</strong> â†’ å˜é‡ã€æ•°æ®ç±»å‹ã€å‡½æ•°ã€æ§åˆ¶æµ</li>
<li><strong>æ ¸å¿ƒæ¦‚å¿µ</strong> â†’ æ‰€æœ‰æƒã€å€Ÿç”¨ã€ç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>ç±»å‹ç³»ç»Ÿ</strong> â†’ ç»“æ„ä½“ã€æšä¸¾ã€æ³›å‹ã€Trait</li>
<li><strong>å®ç”¨æŠ€èƒ½</strong> â†’ é”™è¯¯å¤„ç†ã€é›†åˆã€è¿­ä»£å™¨ã€é—­åŒ…</li>
<li><strong>è¿›é˜¶ä¸»é¢˜</strong> â†’ å¹¶å‘ç¼–ç¨‹ã€æ™ºèƒ½æŒ‡é’ˆã€å¼‚æ­¥ç¼–ç¨‹</li>
</ol>
<h3 id="æ¨èå­¦ä¹ èµ„æº"><a href="#æ¨èå­¦ä¹ èµ„æº" class="headerlink" title="æ¨èå­¦ä¹ èµ„æº"></a>æ¨èå­¦ä¹ èµ„æº</h3><ul>
<li>ğŸ“– <a href="https://doc.rust-lang.org/book/">The Rust Programming Language</a>ï¼ˆå®˜æ–¹æ•™ç¨‹ï¼‰</li>
<li>ğŸ‹ï¸ <a href="https://github.com/rust-lang/rustlings">Rustlings</a>ï¼ˆäº¤äº’å¼ç»ƒä¹ ï¼‰</li>
<li>ğŸ“ <a href="https://doc.rust-lang.org/rust-by-example/">Rust by Example</a>ï¼ˆç¤ºä¾‹å­¦ä¹ ï¼‰</li>
<li>ğŸ” <a href="https://crates.io/">crates.io</a>ï¼ˆç¬¬ä¸‰æ–¹åº“ä»“åº“ï¼‰</li>
</ul>
</div></div></body><script src="/js/highlight.min.js"></script><script src="/js/main.js"></script><script src="/js/bootstrap/bootstrap.min.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXX"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XXXXXXXXX');</script></html>