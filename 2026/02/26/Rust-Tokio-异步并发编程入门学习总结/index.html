<!DOCTYPE html><html lang="zh-cn"><head><title>Rust Tokio å¼‚æ­¥å¹¶å‘ç¼–ç¨‹å…¥é—¨å­¦ä¹ æ€»ç»“</title><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=0.5"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="stylesheet" href="/css/highlight/xcode.min.css"><link rel="stylesheet" href="/css/bootstrap/bootstrap-tooltips.css"><link rel="stylesheet" href="/css/post.css"><script src="/js/jquery.min.js"></script><meta name="generator" content="Hexo 7.3.0"></head><body><script>if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)) {
  document.body.classList.add('mobile')
}</script><div><div class="inner"><h1>Rust Tokio å¼‚æ­¥å¹¶å‘ç¼–ç¨‹å…¥é—¨å­¦ä¹ æ€»ç»“</h1><div class="time">2026-02-26</div><ul class="tags"><li><span>#</span><a href="/tags/Rust/">Rust</a></li></ul><h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯-Tokioï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯-Tokioï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯ Tokioï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯ Tokioï¼Ÿ</h2><p>Tokio æ˜¯ Rust ç”Ÿæ€ç³»ç»Ÿä¸­æœ€æµè¡Œçš„å¼‚æ­¥è¿è¡Œæ—¶ï¼ˆasync runtimeï¼‰ï¼Œå®ƒä¸ºç¼–å†™é«˜æ€§èƒ½çš„å¼‚æ­¥åº”ç”¨ç¨‹åºæä¾›äº†å®Œæ•´çš„å·¥å…·é›†ã€‚Tokio è®©ä½ èƒ½å¤Ÿä½¿ç”¨ <code>async/await</code> è¯­æ³•ç¼–å†™å¹¶å‘ä»£ç ï¼Œåœ¨å•çº¿ç¨‹æˆ–å¤šçº¿ç¨‹ç¯å¢ƒä¸­é«˜æ•ˆåœ°å¤„ç†æˆåƒä¸Šä¸‡çš„å¹¶å‘ä»»åŠ¡ã€‚</p>
<h3 id="æ ¸å¿ƒç‰¹æ€§"><a href="#æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="æ ¸å¿ƒç‰¹æ€§"></a>æ ¸å¿ƒç‰¹æ€§</h3><ul>
<li><strong>å¼‚æ­¥è¿è¡Œæ—¶</strong>ï¼šæä¾›ä»»åŠ¡è°ƒåº¦å™¨å’Œäº‹ä»¶å¾ªç¯</li>
<li><strong>å¼‚æ­¥ I&#x2F;O</strong>ï¼šé«˜æ€§èƒ½çš„ç½‘ç»œå’Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œ</li>
<li><strong>å®šæ—¶å™¨å’Œå»¶è¿Ÿ</strong>ï¼šç²¾ç¡®çš„å¼‚æ­¥æ—¶é—´æ§åˆ¶</li>
<li><strong>åŒæ­¥åŸè¯­</strong>ï¼šå¼‚æ­¥ç‰ˆæœ¬çš„ Mutexã€Semaphore ç­‰</li>
<li><strong>å¤šçº¿ç¨‹æ”¯æŒ</strong>ï¼šå¯é…ç½®çš„å·¥ä½œçº¿ç¨‹æ± </li>
</ul>
<h2 id="äºŒã€å¼‚æ­¥ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ"><a href="#äºŒã€å¼‚æ­¥ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ" class="headerlink" title="äºŒã€å¼‚æ­¥ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ"></a>äºŒã€å¼‚æ­¥ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ</h2><h3 id="2-1-åŒæ­¥-vs-å¼‚æ­¥"><a href="#2-1-åŒæ­¥-vs-å¼‚æ­¥" class="headerlink" title="2.1 åŒæ­¥ vs å¼‚æ­¥"></a>2.1 åŒæ­¥ vs å¼‚æ­¥</h3><p><strong>åŒæ­¥ä»£ç </strong>æ‰§è¡Œæ—¶ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°æ“ä½œå®Œæˆï¼š</p>
<pre><code class="highlight rust"><span class="comment">// åŒæ­¥ä»£ç  - é˜»å¡ 2 ç§’</span>
std::thread::<span class="title function_ invoke__">sleep</span>(std::time::Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">2</span>));
<span class="built_in">println!</span>(<span class="string">&quot;å®Œæˆ!&quot;</span>);</code></pre>

<p><strong>å¼‚æ­¥ä»£ç </strong>å¯ä»¥åœ¨ç­‰å¾…æ—¶è®©å‡ºæ‰§è¡Œæƒï¼Œè®©å…¶ä»–ä»»åŠ¡è¿è¡Œï¼š</p>
<pre><code class="highlight rust"><span class="comment">// å¼‚æ­¥ä»£ç  - ä¸é˜»å¡çº¿ç¨‹</span>
tokio::time::<span class="title function_ invoke__">sleep</span>(tokio::time::Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">2</span>)).<span class="keyword">await</span>;
<span class="built_in">println!</span>(<span class="string">&quot;å®Œæˆ!&quot;</span>);</code></pre>

<h3 id="2-2-Future-å’Œ-async-await"><a href="#2-2-Future-å’Œ-async-await" class="headerlink" title="2.2 Future å’Œ async&#x2F;await"></a>2.2 Future å’Œ async&#x2F;await</h3><ul>
<li><code>Future</code> æ˜¯ Rust ä¸­è¡¨ç¤ºå¼‚æ­¥è®¡ç®—çš„ trait</li>
<li><code>async</code> å…³é”®å­—å°†å‡½æ•°è½¬æ¢ä¸ºè¿”å› Future çš„å‡½æ•°</li>
<li><code>await</code> å…³é”®å­—ç­‰å¾… Future å®Œæˆå¹¶è·å–ç»“æœ</li>
</ul>
<h2 id="ä¸‰ã€Tokio-å…¥é—¨å®è·µ"><a href="#ä¸‰ã€Tokio-å…¥é—¨å®è·µ" class="headerlink" title="ä¸‰ã€Tokio å…¥é—¨å®è·µ"></a>ä¸‰ã€Tokio å…¥é—¨å®è·µ</h2><h3 id="3-1-æ·»åŠ ä¾èµ–"><a href="#3-1-æ·»åŠ ä¾èµ–" class="headerlink" title="3.1 æ·»åŠ ä¾èµ–"></a>3.1 æ·»åŠ ä¾èµ–</h3><p>åœ¨ <code>Cargo.toml</code> ä¸­æ·»åŠ ï¼š</p>
<pre><code class="highlight toml"><span class="section">[dependencies]</span>
<span class="attr">tokio</span> = &#123; version = <span class="string">&quot;1&quot;</span>, features = [<span class="string">&quot;full&quot;</span>] &#125;</code></pre>

<h3 id="3-2-ç¬¬ä¸€ä¸ª-Tokio-ç¨‹åº"><a href="#3-2-ç¬¬ä¸€ä¸ª-Tokio-ç¨‹åº" class="headerlink" title="3.2 ç¬¬ä¸€ä¸ª Tokio ç¨‹åº"></a>3.2 ç¬¬ä¸€ä¸ª Tokio ç¨‹åº</h3><pre><code class="highlight rust"><span class="keyword">use</span> tokio::time::&#123;sleep, Duration&#125;;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="built_in">println!</span>(<span class="string">&quot;Hello, Tokio!&quot;</span>);
    
    <span class="comment">// å¼‚æ­¥ç¡çœ  1 ç§’</span>
    <span class="title function_ invoke__">sleep</span>(Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">1</span>)).<span class="keyword">await</span>;
    
    <span class="built_in">println!</span>(<span class="string">&quot;ä¸€ç§’å...&quot;</span>);
&#125;</code></pre>

<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>#[tokio::main]</code> å®è‡ªåŠ¨åˆ›å»º Tokio è¿è¡Œæ—¶å¹¶æ‰§è¡Œ async main å‡½æ•°</li>
<li><code>sleep().await</code> å¼‚æ­¥ç­‰å¾…ï¼Œä¸é˜»å¡çº¿ç¨‹</li>
</ul>
<h3 id="3-3-å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡"><a href="#3-3-å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡" class="headerlink" title="3.3 å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡"></a>3.3 å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡</h3><pre><code class="highlight rust"><span class="keyword">use</span> tokio::time::&#123;sleep, Duration&#125;;

<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">task1</span>() &#123;
    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..=<span class="number">3</span> &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;ä»»åŠ¡1: æ­¥éª¤ &#123;&#125;&quot;</span>, i);
        <span class="title function_ invoke__">sleep</span>(Duration::<span class="title function_ invoke__">from_millis</span>(<span class="number">500</span>)).<span class="keyword">await</span>;
    &#125;
&#125;

<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">task2</span>() &#123;
    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..=<span class="number">3</span> &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;ä»»åŠ¡2: æ­¥éª¤ &#123;&#125;&quot;</span>, i);
        <span class="title function_ invoke__">sleep</span>(Duration::<span class="title function_ invoke__">from_millis</span>(<span class="number">300</span>)).<span class="keyword">await</span>;
    &#125;
&#125;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// å¹¶å‘æ‰§è¡Œä¸¤ä¸ªä»»åŠ¡</span>
    tokio::join!(<span class="title function_ invoke__">task1</span>(), <span class="title function_ invoke__">task2</span>());
    <span class="built_in">println!</span>(<span class="string">&quot;æ‰€æœ‰ä»»åŠ¡å®Œæˆ!&quot;</span>);
&#125;</code></pre>

<p><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="highlight plaintext">ä»»åŠ¡1: æ­¥éª¤ 1
ä»»åŠ¡2: æ­¥éª¤ 1
ä»»åŠ¡2: æ­¥éª¤ 2
ä»»åŠ¡1: æ­¥éª¤ 2
ä»»åŠ¡2: æ­¥éª¤ 3
ä»»åŠ¡1: æ­¥éª¤ 3
æ‰€æœ‰ä»»åŠ¡å®Œæˆ!</code></pre>

<h2 id="å››ã€Tokio-æ ¸å¿ƒæ¦‚å¿µ"><a href="#å››ã€Tokio-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="å››ã€Tokio æ ¸å¿ƒæ¦‚å¿µ"></a>å››ã€Tokio æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id="4-1-Spawnï¼šç”Ÿæˆç‹¬ç«‹ä»»åŠ¡"><a href="#4-1-Spawnï¼šç”Ÿæˆç‹¬ç«‹ä»»åŠ¡" class="headerlink" title="4.1 Spawnï¼šç”Ÿæˆç‹¬ç«‹ä»»åŠ¡"></a>4.1 Spawnï¼šç”Ÿæˆç‹¬ç«‹ä»»åŠ¡</h3><p>ä½¿ç”¨ <code>tokio::spawn</code> åˆ›å»ºåœ¨åå°è¿è¡Œçš„ç‹¬ç«‹ä»»åŠ¡ï¼š</p>
<pre><code class="highlight rust"><span class="keyword">use</span> tokio::time::&#123;sleep, Duration&#125;;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// ç”Ÿæˆä¸€ä¸ªåå°ä»»åŠ¡</span>
    <span class="keyword">let</span> <span class="variable">handle</span> = tokio::<span class="title function_ invoke__">spawn</span>(<span class="keyword">async</span> &#123;
        <span class="title function_ invoke__">sleep</span>(Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">1</span>)).<span class="keyword">await</span>;
        <span class="built_in">println!</span>(<span class="string">&quot;åå°ä»»åŠ¡å®Œæˆ!&quot;</span>);
        <span class="string">&quot;è¿”å›å€¼&quot;</span>
    &#125;);
    
    <span class="built_in">println!</span>(<span class="string">&quot;ä¸»ä»»åŠ¡ç»§ç»­æ‰§è¡Œ...&quot;</span>);
    
    <span class="comment">// ç­‰å¾…åå°ä»»åŠ¡å®Œæˆå¹¶è·å–è¿”å›å€¼</span>
    <span class="keyword">let</span> <span class="variable">result</span> = handle.<span class="keyword">await</span>.<span class="title function_ invoke__">unwrap</span>();
    <span class="built_in">println!</span>(<span class="string">&quot;ä»»åŠ¡è¿”å›: &#123;&#125;&quot;</span>, result);
&#125;</code></pre>

<h3 id="4-2-å¤šä¸ªä»»åŠ¡çš„ä¸åŒç­‰å¾…ç­–ç•¥"><a href="#4-2-å¤šä¸ªä»»åŠ¡çš„ä¸åŒç­‰å¾…ç­–ç•¥" class="headerlink" title="4.2 å¤šä¸ªä»»åŠ¡çš„ä¸åŒç­‰å¾…ç­–ç•¥"></a>4.2 å¤šä¸ªä»»åŠ¡çš„ä¸åŒç­‰å¾…ç­–ç•¥</h3><h4 id="ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼šjoin"><a href="#ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼šjoin" class="headerlink" title="ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼šjoin!"></a>ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼š<code>join!</code></h4><pre><code class="highlight rust"><span class="keyword">use</span> tokio::time::&#123;sleep, Duration&#125;;

<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">fetch_user</span>(id: <span class="type">u32</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;
    <span class="title function_ invoke__">sleep</span>(Duration::<span class="title function_ invoke__">from_millis</span>(<span class="number">100</span>)).<span class="keyword">await</span>;
    <span class="built_in">format!</span>(<span class="string">&quot;ç”¨æˆ·&#123;&#125;&quot;</span>, id)
&#125;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">start</span> = std::time::Instant::<span class="title function_ invoke__">now</span>();
    
    <span class="comment">// å¹¶å‘æ‰§è¡Œï¼Œç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
    <span class="keyword">let</span> (user1, user2, user3) = tokio::join!(
        <span class="title function_ invoke__">fetch_user</span>(<span class="number">1</span>),
        <span class="title function_ invoke__">fetch_user</span>(<span class="number">2</span>),
        <span class="title function_ invoke__">fetch_user</span>(<span class="number">3</span>)
    );
    
    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, user1, user2, user3);
    <span class="built_in">println!</span>(<span class="string">&quot;è€—æ—¶: &#123;:?&#125;&quot;</span>, start.<span class="title function_ invoke__">elapsed</span>()); <span class="comment">// çº¦ 100ms</span>
&#125;</code></pre>

<h4 id="ç­‰å¾…ç¬¬ä¸€ä¸ªå®Œæˆï¼šselect"><a href="#ç­‰å¾…ç¬¬ä¸€ä¸ªå®Œæˆï¼šselect" class="headerlink" title="ç­‰å¾…ç¬¬ä¸€ä¸ªå®Œæˆï¼šselect!"></a>ç­‰å¾…ç¬¬ä¸€ä¸ªå®Œæˆï¼š<code>select!</code></h4><pre><code class="highlight rust"><span class="keyword">use</span> tokio::time::&#123;sleep, Duration&#125;;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">task1</span> = <span class="keyword">async</span> &#123;
        <span class="title function_ invoke__">sleep</span>(Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">1</span>)).<span class="keyword">await</span>;
        <span class="string">&quot;ä»»åŠ¡1å®Œæˆ&quot;</span>
    &#125;;
    
    <span class="keyword">let</span> <span class="variable">task2</span> = <span class="keyword">async</span> &#123;
        <span class="title function_ invoke__">sleep</span>(Duration::<span class="title function_ invoke__">from_millis</span>(<span class="number">500</span>)).<span class="keyword">await</span>;
        <span class="string">&quot;ä»»åŠ¡2å®Œæˆ&quot;</span>
    &#125;;
    
    <span class="comment">// ç­‰å¾…ç¬¬ä¸€ä¸ªå®Œæˆçš„ä»»åŠ¡</span>
    tokio::<span class="built_in">select!</span> &#123;
        result = task1 =&gt; <span class="built_in">println!</span>(<span class="string">&quot;å…ˆå®Œæˆ: &#123;&#125;&quot;</span>, result),
        result = task2 =&gt; <span class="built_in">println!</span>(<span class="string">&quot;å…ˆå®Œæˆ: &#123;&#125;&quot;</span>, result),
    &#125;
&#125;</code></pre>

<h3 id="4-3-é€šé“ï¼ˆChannelï¼‰ï¼šä»»åŠ¡é—´é€šä¿¡"><a href="#4-3-é€šé“ï¼ˆChannelï¼‰ï¼šä»»åŠ¡é—´é€šä¿¡" class="headerlink" title="4.3 é€šé“ï¼ˆChannelï¼‰ï¼šä»»åŠ¡é—´é€šä¿¡"></a>4.3 é€šé“ï¼ˆChannelï¼‰ï¼šä»»åŠ¡é—´é€šä¿¡</h3><p>Tokio æä¾›å¤šç§é€šé“ç±»å‹ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ <code>mpsc</code>ï¼ˆå¤šç”Ÿäº§è€…å•æ¶ˆè´¹è€…ï¼‰ï¼š</p>
<pre><code class="highlight rust"><span class="keyword">use</span> tokio::sync::mpsc;
<span class="keyword">use</span> tokio::time::&#123;sleep, Duration&#125;;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// åˆ›å»ºå®¹é‡ä¸º 32 çš„é€šé“</span>
    <span class="keyword">let</span> (tx, <span class="keyword">mut</span> rx) = mpsc::<span class="title function_ invoke__">channel</span>(<span class="number">32</span>);
    
    <span class="comment">// ç”Ÿäº§è€…ä»»åŠ¡</span>
    tokio::<span class="title function_ invoke__">spawn</span>(<span class="keyword">async</span> <span class="keyword">move</span> &#123;
        <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..=<span class="number">5</span> &#123;
            tx.<span class="title function_ invoke__">send</span>(<span class="built_in">format!</span>(<span class="string">&quot;æ¶ˆæ¯ &#123;&#125;&quot;</span>, i)).<span class="keyword">await</span>.<span class="title function_ invoke__">unwrap</span>();
            <span class="title function_ invoke__">sleep</span>(Duration::<span class="title function_ invoke__">from_millis</span>(<span class="number">200</span>)).<span class="keyword">await</span>;
        &#125;
    &#125;);
    
    <span class="comment">// æ¶ˆè´¹è€…ï¼šæ¥æ”¶æ¶ˆæ¯</span>
    <span class="keyword">while</span> <span class="keyword">let</span> <span class="variable">Some</span>(msg) = rx.<span class="title function_ invoke__">recv</span>().<span class="keyword">await</span> &#123;
        <span class="built_in">println!</span>(<span class="string">&quot;æ”¶åˆ°: &#123;&#125;&quot;</span>, msg);
    &#125;
    
    <span class="built_in">println!</span>(<span class="string">&quot;é€šé“å·²å…³é—­&quot;</span>);
&#125;</code></pre>

<h3 id="4-4-å…±äº«çŠ¶æ€ï¼šArc-å’Œ-Mutex"><a href="#4-4-å…±äº«çŠ¶æ€ï¼šArc-å’Œ-Mutex" class="headerlink" title="4.4 å…±äº«çŠ¶æ€ï¼šArc å’Œ Mutex"></a>4.4 å…±äº«çŠ¶æ€ï¼šArc å’Œ Mutex</h3><p>åœ¨å¤šä¸ªä»»åŠ¡é—´å…±äº«å¯å˜çŠ¶æ€ï¼š</p>
<pre><code class="highlight rust"><span class="keyword">use</span> std::sync::Arc;
<span class="keyword">use</span> tokio::sync::Mutex;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// ä½¿ç”¨ Arc å…±äº«æ‰€æœ‰æƒï¼ŒMutex ä¿æŠ¤å¯å˜è®¿é—®</span>
    <span class="keyword">let</span> <span class="variable">counter</span> = Arc::<span class="title function_ invoke__">new</span>(Mutex::<span class="title function_ invoke__">new</span>(<span class="number">0</span>));
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">handles</span> = <span class="built_in">vec!</span>[];
    
    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="number">10</span> &#123;
        <span class="keyword">let</span> <span class="variable">counter</span> = Arc::<span class="title function_ invoke__">clone</span>(&amp;counter);
        <span class="keyword">let</span> <span class="variable">handle</span> = tokio::<span class="title function_ invoke__">spawn</span>(<span class="keyword">async</span> <span class="keyword">move</span> &#123;
            <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">num</span> = counter.<span class="title function_ invoke__">lock</span>().<span class="keyword">await</span>;
            *num += <span class="number">1</span>;
            <span class="built_in">println!</span>(<span class="string">&quot;ä»»åŠ¡ &#123;&#125; å¢åŠ è®¡æ•°å™¨&quot;</span>, i);
        &#125;);
        handles.<span class="title function_ invoke__">push</span>(handle);
    &#125;
    
    <span class="comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
    <span class="keyword">for</span> <span class="variable">handle</span> <span class="keyword">in</span> handles &#123;
        handle.<span class="keyword">await</span>.<span class="title function_ invoke__">unwrap</span>();
    &#125;
    
    <span class="built_in">println!</span>(<span class="string">&quot;æœ€ç»ˆè®¡æ•°: &#123;&#125;&quot;</span>, *counter.<span class="title function_ invoke__">lock</span>().<span class="keyword">await</span>);
&#125;</code></pre>

<p><strong>æ³¨æ„</strong>ï¼šå¿…é¡»ä½¿ç”¨ <code>tokio::sync::Mutex</code>ï¼Œä¸èƒ½ä½¿ç”¨ <code>std::sync::Mutex</code>ï¼Œå› ä¸ºåè€…ä¼šé˜»å¡çº¿ç¨‹ã€‚</p>
<h2 id="äº”ã€å®æˆ˜æ¡ˆä¾‹"><a href="#äº”ã€å®æˆ˜æ¡ˆä¾‹" class="headerlink" title="äº”ã€å®æˆ˜æ¡ˆä¾‹"></a>äº”ã€å®æˆ˜æ¡ˆä¾‹</h2><h3 id="5-1-å¹¶å‘-HTTP-è¯·æ±‚æ¨¡æ‹Ÿ"><a href="#5-1-å¹¶å‘-HTTP-è¯·æ±‚æ¨¡æ‹Ÿ" class="headerlink" title="5.1 å¹¶å‘ HTTP è¯·æ±‚æ¨¡æ‹Ÿ"></a>5.1 å¹¶å‘ HTTP è¯·æ±‚æ¨¡æ‹Ÿ</h3><pre><code class="highlight rust"><span class="keyword">use</span> tokio::time::&#123;sleep, Duration&#125;;
<span class="keyword">use</span> std::time::Instant;

<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">fetch_url</span>(url: &amp;<span class="type">str</span>, delay_ms: <span class="type">u64</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">String</span>, <span class="type">String</span>&gt; &#123;
    <span class="built_in">println!</span>(<span class="string">&quot;å¼€å§‹è¯·æ±‚: &#123;&#125;&quot;</span>, url);
    <span class="title function_ invoke__">sleep</span>(Duration::<span class="title function_ invoke__">from_millis</span>(delay_ms)).<span class="keyword">await</span>;
    
    <span class="comment">// æ¨¡æ‹Ÿå¶å°”å¤±è´¥</span>
    <span class="keyword">if</span> delay_ms &gt; <span class="number">500</span> &#123;
        <span class="title function_ invoke__">Ok</span>(<span class="built_in">format!</span>(<span class="string">&quot;æˆåŠŸè·å–: &#123;&#125;&quot;</span>, url))
    &#125; <span class="keyword">else</span> &#123;
        <span class="title function_ invoke__">Err</span>(<span class="built_in">format!</span>(<span class="string">&quot;è¯·æ±‚å¤±è´¥: &#123;&#125;&quot;</span>, url))
    &#125;
&#125;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">start</span> = Instant::<span class="title function_ invoke__">now</span>();
    
    <span class="keyword">let</span> <span class="variable">urls</span> = <span class="built_in">vec!</span>[
        (<span class="string">&quot;https://api1.example.com&quot;</span>, <span class="number">300</span>),
        (<span class="string">&quot;https://api2.example.com&quot;</span>, <span class="number">600</span>),
        (<span class="string">&quot;https://api3.example.com&quot;</span>, <span class="number">400</span>),
    ];
    
    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">tasks</span> = <span class="built_in">vec!</span>[];
    
    <span class="keyword">for</span> (url, delay) <span class="keyword">in</span> urls &#123;
        <span class="keyword">let</span> <span class="variable">task</span> = tokio::<span class="title function_ invoke__">spawn</span>(<span class="keyword">async</span> <span class="keyword">move</span> &#123;
            <span class="title function_ invoke__">fetch_url</span>(url, delay).<span class="keyword">await</span>
        &#125;);
        tasks.<span class="title function_ invoke__">push</span>(task);
    &#125;
    
    <span class="comment">// æ”¶é›†æ‰€æœ‰ç»“æœ</span>
    <span class="keyword">for</span> <span class="variable">task</span> <span class="keyword">in</span> tasks &#123;
        <span class="keyword">match</span> task.<span class="keyword">await</span>.<span class="title function_ invoke__">unwrap</span>() &#123;
            <span class="title function_ invoke__">Ok</span>(result) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;âœ“ &#123;&#125;&quot;</span>, result),
            <span class="title function_ invoke__">Err</span>(err) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;âœ— &#123;&#125;&quot;</span>, err),
        &#125;
    &#125;
    
    <span class="built_in">println!</span>(<span class="string">&quot;æ€»è€—æ—¶: &#123;:?&#125;&quot;</span>, start.<span class="title function_ invoke__">elapsed</span>());
&#125;</code></pre>

<h3 id="5-2-ç®€å•çš„å¼‚æ­¥-Web-æœåŠ¡å™¨æ¡†æ¶"><a href="#5-2-ç®€å•çš„å¼‚æ­¥-Web-æœåŠ¡å™¨æ¡†æ¶" class="headerlink" title="5.2 ç®€å•çš„å¼‚æ­¥ Web æœåŠ¡å™¨æ¡†æ¶"></a>5.2 ç®€å•çš„å¼‚æ­¥ Web æœåŠ¡å™¨æ¡†æ¶</h3><pre><code class="highlight rust"><span class="keyword">use</span> tokio::net::TcpListener;
<span class="keyword">use</span> tokio::io::&#123;AsyncReadExt, AsyncWriteExt&#125;;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;(), <span class="type">Box</span>&lt;<span class="keyword">dyn</span> std::error::Error&gt;&gt; &#123;
    <span class="keyword">let</span> <span class="variable">listener</span> = TcpListener::<span class="title function_ invoke__">bind</span>(<span class="string">&quot;127.0.0.1:8080&quot;</span>).<span class="keyword">await</span>?;
    <span class="built_in">println!</span>(<span class="string">&quot;æœåŠ¡å™¨ç›‘å¬ 127.0.0.1:8080&quot;</span>);
    
    <span class="keyword">loop</span> &#123;
        <span class="comment">// æ¥å—æ–°è¿æ¥</span>
        <span class="keyword">let</span> (<span class="keyword">mut</span> socket, addr) = listener.<span class="title function_ invoke__">accept</span>().<span class="keyword">await</span>?;
        <span class="built_in">println!</span>(<span class="string">&quot;æ–°è¿æ¥: &#123;&#125;&quot;</span>, addr);
        
        <span class="comment">// ä¸ºæ¯ä¸ªè¿æ¥ç”Ÿæˆç‹¬ç«‹ä»»åŠ¡</span>
        tokio::<span class="title function_ invoke__">spawn</span>(<span class="keyword">async</span> <span class="keyword">move</span> &#123;
            <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">buffer</span> = [<span class="number">0</span>; <span class="number">1024</span>];
            
            <span class="comment">// è¯»å–æ•°æ®</span>
            <span class="keyword">match</span> socket.<span class="title function_ invoke__">read</span>(&amp;<span class="keyword">mut</span> buffer).<span class="keyword">await</span> &#123;
                <span class="title function_ invoke__">Ok</span>(n) <span class="keyword">if</span> n &gt; <span class="number">0</span> =&gt; &#123;
                    <span class="keyword">let</span> <span class="variable">request</span> = <span class="type">String</span>::<span class="title function_ invoke__">from_utf8_lossy</span>(&amp;buffer[..n]);
                    <span class="built_in">println!</span>(<span class="string">&quot;æ”¶åˆ°è¯·æ±‚:\n&#123;&#125;&quot;</span>, request);
                    
                    <span class="comment">// å‘é€å“åº”</span>
                    <span class="keyword">let</span> <span class="variable">response</span> = <span class="string">&quot;HTTP/1.1 200 OK\r\n\</span>
<span class="string">                                   Content-Type: text/plain\r\n\</span>
<span class="string">                                   \r\n\</span>
<span class="string">                                   Hello from Tokio!&quot;</span>;
                    socket.<span class="title function_ invoke__">write_all</span>(response.<span class="title function_ invoke__">as_bytes</span>()).<span class="keyword">await</span>.<span class="title function_ invoke__">ok</span>();
                &#125;
                _ =&gt; <span class="built_in">println!</span>(<span class="string">&quot;è¿æ¥å…³é—­: &#123;&#125;&quot;</span>, addr),
            &#125;
        &#125;);
    &#125;
&#125;</code></pre>

<h3 id="5-3-è¶…æ—¶æ§åˆ¶"><a href="#5-3-è¶…æ—¶æ§åˆ¶" class="headerlink" title="5.3 è¶…æ—¶æ§åˆ¶"></a>5.3 è¶…æ—¶æ§åˆ¶</h3><pre><code class="highlight rust"><span class="keyword">use</span> tokio::time::&#123;sleep, Duration, timeout&#125;;

<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">long_running_task</span>() <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;
    <span class="title function_ invoke__">sleep</span>(Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">3</span>)).<span class="keyword">await</span>;
    <span class="string">&quot;ä»»åŠ¡å®Œæˆ&quot;</span>.<span class="title function_ invoke__">to_string</span>()
&#125;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// è®¾ç½® 1 ç§’è¶…æ—¶</span>
    <span class="keyword">match</span> <span class="title function_ invoke__">timeout</span>(Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">1</span>), <span class="title function_ invoke__">long_running_task</span>()).<span class="keyword">await</span> &#123;
        <span class="title function_ invoke__">Ok</span>(result) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;æˆåŠŸ: &#123;&#125;&quot;</span>, result),
        <span class="title function_ invoke__">Err</span>(_) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;ä»»åŠ¡è¶…æ—¶!&quot;</span>),
    &#125;
    
    <span class="comment">// è®¾ç½® 5 ç§’è¶…æ—¶</span>
    <span class="keyword">match</span> <span class="title function_ invoke__">timeout</span>(Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">5</span>), <span class="title function_ invoke__">long_running_task</span>()).<span class="keyword">await</span> &#123;
        <span class="title function_ invoke__">Ok</span>(result) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;æˆåŠŸ: &#123;&#125;&quot;</span>, result),
        <span class="title function_ invoke__">Err</span>(_) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;ä»»åŠ¡è¶…æ—¶!&quot;</span>),
    &#125;
&#125;</code></pre>

<h2 id="å…­ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ"><a href="#å…­ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ" class="headerlink" title="å…­ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ"></a>å…­ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ</h2><h3 id="6-1-é¿å…é˜»å¡æ“ä½œ"><a href="#6-1-é¿å…é˜»å¡æ“ä½œ" class="headerlink" title="6.1 é¿å…é˜»å¡æ“ä½œ"></a>6.1 é¿å…é˜»å¡æ“ä½œ</h3><p>âŒ <strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼šåœ¨å¼‚æ­¥ä»£ç ä¸­ä½¿ç”¨é˜»å¡æ“ä½œ</p>
<pre><code class="highlight rust"><span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    tokio::<span class="title function_ invoke__">spawn</span>(<span class="keyword">async</span> &#123;
        <span class="comment">// è¿™ä¼šé˜»å¡å·¥ä½œçº¿ç¨‹!</span>
        std::thread::<span class="title function_ invoke__">sleep</span>(std::time::Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">10</span>));
    &#125;);
&#125;</code></pre>

<p>âœ… <strong>æ­£ç¡®åšæ³•</strong>ï¼šä½¿ç”¨ Tokio çš„å¼‚æ­¥ç‰ˆæœ¬æˆ– <code>spawn_blocking</code></p>
<pre><code class="highlight rust"><span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// æ–¹æ³•1: ä½¿ç”¨å¼‚æ­¥ç‰ˆæœ¬</span>
    tokio::<span class="title function_ invoke__">spawn</span>(<span class="keyword">async</span> &#123;
        tokio::time::<span class="title function_ invoke__">sleep</span>(tokio::time::Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">10</span>)).<span class="keyword">await</span>;
    &#125;);
    
    <span class="comment">// æ–¹æ³•2: å¿…é¡»é˜»å¡æ—¶ä½¿ç”¨ spawn_blocking</span>
    tokio::task::<span class="title function_ invoke__">spawn_blocking</span>(|| &#123;
        <span class="comment">// æ‰§è¡Œ CPU å¯†é›†æˆ–é˜»å¡æ“ä½œ</span>
        std::thread::<span class="title function_ invoke__">sleep</span>(std::time::Duration::<span class="title function_ invoke__">from_secs</span>(<span class="number">10</span>));
    &#125;);
&#125;</code></pre>

<h3 id="6-2-é€‰æ‹©åˆé€‚çš„è¿è¡Œæ—¶é…ç½®"><a href="#6-2-é€‰æ‹©åˆé€‚çš„è¿è¡Œæ—¶é…ç½®" class="headerlink" title="6.2 é€‰æ‹©åˆé€‚çš„è¿è¡Œæ—¶é…ç½®"></a>6.2 é€‰æ‹©åˆé€‚çš„è¿è¡Œæ—¶é…ç½®</h3><pre><code class="highlight rust"><span class="comment">// å•çº¿ç¨‹è¿è¡Œæ—¶ - é€‚åˆç®€å•åœºæ™¯</span>
<span class="meta">#[tokio::main(flavor = <span class="string">&quot;current_thread&quot;</span>)]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// ...</span>
&#125;

<span class="comment">// å¤šçº¿ç¨‹è¿è¡Œæ—¶ - é»˜è®¤é…ç½®ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯</span>
<span class="meta">#[tokio::main(flavor = <span class="string">&quot;multi_thread&quot;</span>, worker_threads = 4)]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="comment">// ...</span>
&#125;

<span class="comment">// æ‰‹åŠ¨åˆ›å»ºè¿è¡Œæ—¶ - æ›´å¤šæ§åˆ¶</span>
<span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">runtime</span> = tokio::runtime::Builder::<span class="title function_ invoke__">new_multi_thread</span>()
        .<span class="title function_ invoke__">worker_threads</span>(<span class="number">4</span>)
        .<span class="title function_ invoke__">thread_name</span>(<span class="string">&quot;my-pool&quot;</span>)
        .<span class="title function_ invoke__">build</span>()
        .<span class="title function_ invoke__">unwrap</span>();
    
    runtime.<span class="title function_ invoke__">block_on</span>(<span class="keyword">async</span> &#123;
        <span class="comment">// å¼‚æ­¥ä»£ç </span>
    &#125;);
&#125;</code></pre>

<h3 id="6-3-æ­£ç¡®ä½¿ç”¨-Mutex"><a href="#6-3-æ­£ç¡®ä½¿ç”¨-Mutex" class="headerlink" title="6.3 æ­£ç¡®ä½¿ç”¨ Mutex"></a>6.3 æ­£ç¡®ä½¿ç”¨ Mutex</h3><pre><code class="highlight rust"><span class="keyword">use</span> tokio::sync::Mutex;
<span class="keyword">use</span> std::sync::Arc;

<span class="meta">#[tokio::main]</span>
<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;
    <span class="keyword">let</span> <span class="variable">data</span> = Arc::<span class="title function_ invoke__">new</span>(Mutex::<span class="title function_ invoke__">new</span>(<span class="built_in">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]));
    
    <span class="comment">// âœ… æ­£ç¡®ï¼šå¿«é€Ÿé‡Šæ”¾é”</span>
    &#123;
        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">d</span> = data.<span class="title function_ invoke__">lock</span>().<span class="keyword">await</span>;
        d.<span class="title function_ invoke__">push</span>(<span class="number">4</span>);
    &#125; <span class="comment">// é”åœ¨è¿™é‡Œé‡Šæ”¾</span>
    
    <span class="comment">// âŒ é¿å…ï¼šæŒæœ‰é”è·¨è¶Š await ç‚¹</span>
    <span class="comment">// let mut d = data.lock().await;</span>
    <span class="comment">// tokio::time::sleep(Duration::from_secs(1)).await; // å±é™©!</span>
    <span class="comment">// d.push(4);</span>
&#125;</code></pre>

<h2 id="ä¸ƒã€å­¦ä¹ æ€»ç»“"><a href="#ä¸ƒã€å­¦ä¹ æ€»ç»“" class="headerlink" title="ä¸ƒã€å­¦ä¹ æ€»ç»“"></a>ä¸ƒã€å­¦ä¹ æ€»ç»“</h2><h3 id="æ ¸å¿ƒè¦ç‚¹"><a href="#æ ¸å¿ƒè¦ç‚¹" class="headerlink" title="æ ¸å¿ƒè¦ç‚¹"></a>æ ¸å¿ƒè¦ç‚¹</h3><ol>
<li><p><strong>å¼‚æ­¥æ¨¡å‹</strong>ï¼šTokio ä½¿ç”¨åä½œå¼å¤šä»»åŠ¡ï¼Œé€šè¿‡ <code>async/await</code> å®ç°é«˜æ•ˆçš„å¹¶å‘å¤„ç†</p>
</li>
<li><p><strong>è¿è¡Œæ—¶</strong>ï¼š<code>#[tokio::main]</code> å®è´Ÿè´£åˆ›å»ºè¿è¡Œæ—¶å’Œè°ƒåº¦å™¨ï¼Œæ˜¯å¼‚æ­¥ç¨‹åºçš„åŸºç¡€</p>
</li>
<li><p><strong>ä»»åŠ¡ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li><code>tokio::spawn</code> åˆ›å»ºç‹¬ç«‹ä»»åŠ¡</li>
<li><code>tokio::join!</code> å¹¶å‘ç­‰å¾…å¤šä¸ªä»»åŠ¡</li>
<li><code>tokio::select!</code> ç­‰å¾…ç¬¬ä¸€ä¸ªå®Œæˆçš„ä»»åŠ¡</li>
</ul>
</li>
<li><p><strong>é€šä¿¡æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>Channelï¼ˆmpsc, oneshot, broadcastï¼‰ç”¨äºä»»åŠ¡é—´ä¼ é€’æ¶ˆæ¯</li>
<li>Arc + Mutex ç”¨äºå…±äº«å¯å˜çŠ¶æ€</li>
</ul>
</li>
<li><p><strong>é¿å…é˜»å¡</strong>ï¼šæ°¸è¿œä¸è¦åœ¨å¼‚æ­¥ä»£ç ä¸­ä½¿ç”¨é˜»å¡æ“ä½œï¼Œä½¿ç”¨ Tokio æä¾›çš„å¼‚æ­¥ç‰ˆæœ¬</p>
</li>
</ol>
<h3 id="æ€§èƒ½ä¼˜åŠ¿"><a href="#æ€§èƒ½ä¼˜åŠ¿" class="headerlink" title="æ€§èƒ½ä¼˜åŠ¿"></a>æ€§èƒ½ä¼˜åŠ¿</h3><ul>
<li><strong>è½»é‡çº§ä»»åŠ¡</strong>ï¼šç›¸æ¯”çº¿ç¨‹ï¼ŒTokio ä»»åŠ¡å‡ ä¹é›¶å¼€é”€</li>
<li><strong>é«˜å¹¶å‘èƒ½åŠ›</strong>ï¼šå¯ä»¥è½»æ¾å¤„ç†æ•°ä¸‡ä¸ªå¹¶å‘è¿æ¥</li>
<li><strong>èµ„æºåˆ©ç”¨</strong>ï¼šå……åˆ†åˆ©ç”¨ CPU å¤šæ ¸èƒ½åŠ›ï¼Œé¿å…çº¿ç¨‹é˜»å¡æµªè´¹</li>
</ul>
<h3 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h3><p>âœ… <strong>éå¸¸é€‚åˆ</strong>ï¼š</p>
<ul>
<li>Web æœåŠ¡å™¨å’Œ API æœåŠ¡</li>
<li>ç½‘ç»œä»£ç†å’Œè´Ÿè½½å‡è¡¡å™¨</li>
<li>å¾®æœåŠ¡æ¶æ„</li>
<li>å®æ—¶æ•°æ®å¤„ç†</li>
<li>é«˜å¹¶å‘ I&#x2F;O å¯†é›†å‹åº”ç”¨</li>
</ul>
<p>âš ï¸ <strong>ä¸å¤ªé€‚åˆ</strong>ï¼š</p>
<ul>
<li>CPU å¯†é›†å‹è®¡ç®—ï¼ˆè€ƒè™‘ Rayon ç­‰å¹¶è¡Œè®¡ç®—åº“ï¼‰</li>
<li>ç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆåŒæ­¥ä»£ç æ›´ç®€å•ï¼‰</li>
</ul>
<h3 id="ç»§ç»­å­¦ä¹ "><a href="#ç»§ç»­å­¦ä¹ " class="headerlink" title="ç»§ç»­å­¦ä¹ "></a>ç»§ç»­å­¦ä¹ </h3><ol>
<li><strong>å®˜æ–¹æ–‡æ¡£</strong>ï¼š<a href="https://tokio.rs/">tokio.rs</a></li>
<li><strong>Tokio Tutorial</strong>ï¼šå®˜æ–¹æ•™ç¨‹éå¸¸è¯¦ç»†</li>
<li><strong>å®è·µé¡¹ç›®</strong>ï¼š<ul>
<li>æ„å»ºä¸€ä¸ªèŠå¤©æœåŠ¡å™¨</li>
<li>å®ç°ä¸€ä¸ª HTTP ä»£ç†</li>
<li>ç¼–å†™å¼‚æ­¥çˆ¬è™«</li>
</ul>
</li>
<li><strong>ç”Ÿæ€ç³»ç»Ÿ</strong>ï¼š<ul>
<li><code>reqwest</code>ï¼šå¼‚æ­¥ HTTP å®¢æˆ·ç«¯</li>
<li><code>axum</code> &#x2F; <code>actix-web</code>ï¼šWeb æ¡†æ¶</li>
<li><code>tonic</code>ï¼šgRPC æ¡†æ¶</li>
</ul>
</li>
</ol>
<h2 id="å…«ã€æ€»ç»“"><a href="#å…«ã€æ€»ç»“" class="headerlink" title="å…«ã€æ€»ç»“"></a>å…«ã€æ€»ç»“</h2><p>Tokio ä¸º Rust æä¾›äº†å¼ºå¤§è€Œä¼˜é›…çš„å¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›ã€‚é€šè¿‡æŒæ¡ <code>async/await</code>ã€ä»»åŠ¡ç”Ÿæˆã€é€šé“é€šä¿¡ç­‰æ ¸å¿ƒæ¦‚å¿µï¼Œä½ å¯ä»¥ç¼–å†™å‡ºé«˜æ€§èƒ½ã€é«˜å¹¶å‘çš„åº”ç”¨ç¨‹åºã€‚å…³é”®æ˜¯è¦ç†è§£å¼‚æ­¥è¿è¡Œæ—¶çš„å·¥ä½œåŸç†ï¼Œé¿å…é˜»å¡æ“ä½œï¼Œåˆç†ä½¿ç”¨å¹¶å‘åŸè¯­ã€‚</p>
<p>ä»ç®€å•çš„ Hello World å¼€å§‹ï¼Œé€æ­¥å®è·µå¹¶å‘ä»»åŠ¡ã€ç½‘ç»œç¼–ç¨‹ç­‰åœºæ™¯ï¼Œä½ ä¼šå‘ç° Tokio åœ¨ä¿æŒ Rust å®‰å…¨æ€§çš„åŒæ—¶ï¼Œæä¾›äº†æ¥è¿‘åŸç”Ÿæ€§èƒ½çš„å¼‚æ­¥å¤„ç†èƒ½åŠ›ã€‚ç»§ç»­æ¢ç´¢å’Œå®è·µï¼Œä½ å°†èƒ½å¤Ÿæ„å»ºå‡ºçœŸæ­£å¼ºå¤§çš„å¼‚æ­¥åº”ç”¨ï¼</p>
<hr>
<p><em>Happy Async Programming with Tokio! ğŸš€</em></p>
</div></div></body><script src="/js/highlight.min.js"></script><script src="/js/main.js"></script><script src="/js/bootstrap/bootstrap.min.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXX"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XXXXXXXXX');</script></html>